const DEBUG=1;class fsmSend{constructor(){this.indexPath=this.getQueryVariable("indexPath");this.userDefIdPath=this.getQueryVariable("userDefIdPath");this.traceCount=0;if(DEBUG){window.bw__debugOut=this.debugOut.bind(this)}}postLogEvent(traceMessage){if(DEBUG){this.debugOut(`Posting event '${traceMessage.event}', message ${JSON.stringify(traceMessage,(k,v)=>k==="event"?undefined:v)}`)}this.postMessageWithPathsAndTraceCount({traceMessage:traceMessage})}triggerEvent(event){if(DEBUG){this.debugOut("triggerEvent: "+event)}this.postMessageWithPathsAndTraceCount({microfinEvent:event})}postMessageWithPathsAndTraceCount(payload){try{payload.indexPath=this.indexPath;payload.userDefIdPath=this.userDefIdPath;payload.traceCount=this.traceCount++;window.parent.postMessage(JSON.stringify(payload),"*")}catch(e){console.error(e)}}getQueryVariable(variable){const parsedUrl=new URL(window.location.href);return parsedUrl.searchParams.get(variable)}debugOut(s){if(DEBUG){console.log(s)}}}
