(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("jQuery"),require("fabric"));else if(typeof define==="function"&&define.amd)define(["jQuery","fabric"],factory);else if(typeof exports==="object")exports["DrawingTool"]=factory(require("jQuery"),require("fabric"));else root["DrawingTool"]=factory(root["jQuery"],root["fabric"])})(this,function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_2__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=39)}([function(module,exports){module.exports=function inherit(Child,Parent){Child.prototype=Object.create(Parent.prototype);Child.prototype.constructor=Child;Child.super=Parent.prototype}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(module,exports,__webpack_require__){var $=__webpack_require__(1);__webpack_require__(15);function BasicButton(options,ui,drawingTool){this.ui=ui;this.dt=drawingTool;this.name=options.name;this.bw__name=options.bw__name;this.palette=options.palette;this.onInit=options.onInit;this._locked=false;var title=$("<div/>").html(options.tooltip).text();const bw__sendButtonEvent=event=>{if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:event,name:this.bw__name?this.bw__name:this.name,palette:this.palette})}};this.$element=$("<div>").addClass("dt-btn").addClass(options.classes).attr("title",title).appendTo(ui.getPalette(options.palette).$element);this.$label=$("<span>").text(options.label).appendTo(this.$element);if(options.onClick){this.$element.on("mousedown touchstart",function(e){if(this._locked)return;bw__sendButtonEvent("BTN_CLICK");options.onClick.call(this,e,ui,drawingTool);e.preventDefault()}.bind(this))}else{this.$element.on("mousedown touchstart",function(e){bw__sendButtonEvent("BTN_CLICK")})}if(options.onLongPress){this.$element.longPress(function(e){if(this._locked)return;options.onLongPress.call(this,e,ui,drawingTool);e.preventDefault()}.bind(this))}if(options.onStateChange){drawingTool.on("state:changed",function(state){options.onStateChange.call(this,state)}.bind(this))}if(options.onToolChange){drawingTool.on("tool:changed",function(state){options.onToolChange.call(this,state)}.bind(this))}if(parent.DIPF_PISA_WRAPPER){this.$element.on("mouseenter",function(){bw__sendButtonEvent("BTN_ENTER")}.bind(this));this.$element.on("mouseleave",function(){bw__sendButtonEvent("BTN_LEAVE")}.bind(this))}if(options.activatesTool){this.$element.on("mousedown touchstart",function(e){if(this._locked)return;if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"TOOL_ACT",tool:options.activatesTool})}drawingTool.chooseTool(options.activatesTool);e.preventDefault()}.bind(this));drawingTool.on("tool:changed",function(toolName){if(toolName===options.activatesTool){this.$element.addClass("dt-active")}else{this.$element.removeClass("dt-active")}}.bind(this))}if(options.reflectsTools){drawingTool.on("tool:changed",function(toolName){if(options.reflectsTools.indexOf(toolName)!==-1){this.setActive(true);this.setLabel(ui.getButton(toolName).getLabel())}else{this.setActive(false);this.$element.removeClass("dt-active")}}.bind(this))}}BasicButton.prototype.setLabel=function(label){this.$label.text(label)};BasicButton.prototype.getLabel=function(){return this.$label.text()};BasicButton.prototype.click=function(){this.$element.triggerHandler("mousedown")};BasicButton.prototype.setActive=function(v){if(v){this.$element.addClass("dt-active")}else{this.$element.removeClass("dt-active")}};BasicButton.prototype.setLocked=function(v){if(v){this.$element.addClass("dt-locked")}else{this.$element.removeClass("dt-locked")}this._locked=v};module.exports=BasicButton},function(module,exports,__webpack_require__){var inherit=__webpack_require__(0);var Tool=__webpack_require__(5);var Util=__webpack_require__(6);function ShapeTool(name,drawTool){Tool.call(this,name,drawTool);var self=this;this.addEventListener("mouse:down",function(e){self.mouseDown(e)});this.addEventListener("mouse:move",function(e){self.mouseMove(e)});this.addEventListener("mouse:up",function(e){self.mouseUp(e)});this.down=false;this._firstAction=false;this._locked=true}inherit(ShapeTool,Tool);ShapeTool.prototype.minSize=7;ShapeTool.prototype.defSize=30;ShapeTool.prototype.activate=function(keepSelection){ShapeTool.super.activate.call(this);this.down=false;this.canvas.defaultCursor="crosshair";if(!keepSelection){this.master.clearSelection()}};ShapeTool.prototype.activateAgain=function(){};ShapeTool.prototype.deactivate=function(){ShapeTool.super.deactivate.call(this);this.canvas.defaultCursor="default"};ShapeTool.prototype.exit=function(){this.down=false;this.master.changeOutOfTool()};ShapeTool.prototype.mouseDown=function(e){this.down=true;if(!this._locked&&!this._firstAction&&e.target!==undefined){this.exit()}};ShapeTool.prototype.mouseMove=function(e){};ShapeTool.prototype.mouseUp=function(e){this.down=false};ShapeTool.prototype.actionComplete=function(newObject){if(newObject){newObject.selectable=!this._locked}if(this._locked){return}if(this._firstAction){this._firstAction=false;this._setAllObjectsSelectable(true)}};ShapeTool.prototype.setCentralOrigin=function(object,keepPosition){var strokeWidth=object.stroke?object.strokeWidth:0;var left=object.left+(object.width+strokeWidth)/2;var top=object.top+(object.height+strokeWidth)/2;object.set({left:left,top:top,originX:"center",originY:"center"})};ShapeTool.prototype.convertToPositiveDimensions=function(object){if(object.width<0){object.left=object.left+object.width;object.width=-object.width}if(object.height<0){object.top=object.top+object.height;object.height=-object.height}};ShapeTool.prototype.moveObjectLeftTop=function(object){var strokeWidth=object.stroke?object.strokeWidth:0;var left=object.left-(object.width+strokeWidth)/2;var top=object.top-(object.height+strokeWidth)/2;object.set({left:left,top:top})};ShapeTool.prototype._setFirstActionMode=function(){this._firstAction=true;this._setAllObjectsSelectable(false)};ShapeTool.prototype._setAllObjectsSelectable=function(selectable){var items=this.canvas.getObjects();for(var i=items.length-1;i>=0;i--){items[i].selectable=selectable}};module.exports=ShapeTool},function(module,exports){function Tool(name,drawTool){this.name=name||"Tool";this.master=drawTool;this.canvas=drawTool.canvas;this.active=false;this.singleUse=false;this._listeners=[];this._stateListeners=[]}Tool.prototype.setActive=function(active){if(this.singleUse){console.warn("This is a single use tool. It was not activated.");return}if(this.active===active){return active}this.active=active;if(active===true){this.activate()}else{this.deactivate()}return active};Tool.prototype.activate=function(){for(var i=0;i<this._listeners.length;i++){var trigger=this._listeners[i].trigger;var action=this._listeners[i].action;this.canvas.on(trigger,action)}};Tool.prototype.activateAgain=function(){};Tool.prototype.use=function(){};Tool.prototype.deactivate=function(){for(var i=0;i<this._listeners.length;i++){var trigger=this._listeners[i].trigger;var action=this._listeners[i].action;this.canvas.off(trigger)}};Tool.prototype.addEventListener=function(eventTrigger,eventHandler){this._listeners.push({trigger:eventTrigger,action:eventHandler})};Tool.prototype.removeEventListener=function(trigger){for(var i=0;i<this._listeners.length;i++){if(trigger==this._listeners[i].trigger){return this._listeners.splice(i,1)}}};module.exports=Tool},function(module,exports){module.exports={dist:function dist(dx,dy){var dx2=Math.pow(dx,2);var dy2=Math.pow(dy,2);return Math.sqrt(dx2+dy2)}}},function(module,exports,__webpack_require__){var fabric=__webpack_require__(2);var SUPPORTED_TYPES=["line","arrow"];function lineCustomControlPoints(canvas){if(canvas.lineCustomControlPointsEnabled)return;var selectedObject=null;canvas.on("object:selected",function(e){var newTarget=e.target;if(selectedObject&&isLine(selectedObject)&&!isControlPoint(newTarget,selectedObject)){lineDeselected.call(selectedObject)}if(!isControlPoint(newTarget,selectedObject)){selectedObject=newTarget;if(isLine(newTarget)){lineSelected.call(newTarget)}}});canvas.on("selection:cleared",function(e){if(selectedObject&&isLine(selectedObject)){lineDeselected.call(selectedObject)}selectedObject=null});canvas.lineCustomControlPointsEnabled=true}lineCustomControlPoints.controlPointColor="#bcd2ff";lineCustomControlPoints.cornerSize=12;function isControlPoint(object,line){return line&&line._dt_controlPoints&&(line._dt_controlPoints[0]===object||line._dt_controlPoints[1]===object)}function isLine(object){for(var i=0;i<SUPPORTED_TYPES.length;i++){if(object.type===SUPPORTED_TYPES[i])return true}return false}function lineSelected(){this.set({hasControls:false,hasBorders:false});var sidelen=lineCustomControlPoints.cornerSize;this._dt_controlPoints=[makeControlPoint(sidelen,this,0),makeControlPoint(sidelen,this,1)];this.hasCustomControlPoints=true;updateLineControlPoints.call(this);this.on("moving",lineMoved);this.on("removed",lineDeleted);this.canvas.renderAll()}function lineDeselected(){this._dt_controlPoints[0]._dt_sourceObj=null;this._dt_controlPoints[1]._dt_sourceObj=null;this._dt_controlPoints[0].remove();this._dt_controlPoints[1].remove();this._dt_controlPoints=undefined;this.hasCustomControlPoints=false;this.off("moving");this.off("removed")}function lineMoved(){updateLineControlPoints.call(this)}function lineDeleted(){if(!this._dt_controlPoints)return;this._dt_controlPoints[0].remove()}function controlPointMoved(){var line=this._dt_sourceObj;line.set("x"+(this.id+1),this.left);line.set("y"+(this.id+1),this.top);line.setCoords();line.canvas.renderAll()}function controlPointDeleted(){var line=this._dt_sourceObj;if(!line)return;var secondControlPoint;if(line._dt_controlPoints[0]!==this){secondControlPoint=line._dt_controlPoints[0]}else{secondControlPoint=line._dt_controlPoints[1]}secondControlPoint.line=null;secondControlPoint.remove();line.remove()}function updateLineControlPoints(){translateLineCoords.call(this);rotateLineCoords.call(this);this._dt_controlPoints[0].set("left",this.get("x1"));this._dt_controlPoints[0].set("top",this.get("y1"));this._dt_controlPoints[1].set("left",this.get("x2"));this._dt_controlPoints[1].set("top",this.get("y2"));this._dt_controlPoints[0].setCoords();this._dt_controlPoints[1].setCoords()}function translateLineCoords(){var centerX=this.get("x1")+(this.get("x2")-this.get("x1"))*.5;var centerY=this.get("y1")+(this.get("y2")-this.get("y1"))*.5;var dx=this.left-centerX;var dy=this.top-centerY;this.set("x1",dx+this.x1);this.set("y1",dy+this.y1);this.set("x2",dx+this.x2);this.set("y2",dy+this.y2)}function rotateLineCoords(){if(this.get("angle")===0)return;var angle=this.get("angle")/180*Math.PI;var originX=this.get("left");var originY=this.get("top");var newA=rot(this.get("x1"),this.get("y1"),originX,originY,angle);var newB=rot(this.get("x2"),this.get("y2"),originX,originY,angle);this.set({x1:newA[0],y1:newA[1],x2:newB[0],y2:newB[1],angle:0});function rot(px,py,ox,oy,theta){var cos=Math.cos(theta);var sin=Math.sin(theta);return[cos*(px-ox)-sin*(py-oy)+ox,sin*(px-ox)+cos*(py-oy)+oy]}}function makeControlPoint(s,source,i){var point=new fabric.Rect({width:s,height:s,strokeWidth:0,stroke:lineCustomControlPoints.controlPointColor,fill:lineCustomControlPoints.controlPointColor,hasControls:false,hasBorders:false,originX:"center",originY:"center",_dt_sourceObj:source,id:i,isControlPoint:true});source.canvas.add(point);point.on("moving",controlPointMoved);point.on("removed",controlPointDeleted);return point}module.exports=lineCustomControlPoints},function(module,exports,__webpack_require__){var fabric=__webpack_require__(2);var inherit=__webpack_require__(0);var Tool=__webpack_require__(5);var lineCustomControlPoints=__webpack_require__(7);var BASIC_SELECTION_PROPERTIES={cornerSize:fabric.isTouchSupported?22:12,transparentCorners:false};function SelectionTool(name,drawTool){Tool.call(this,name,drawTool);this.canvas.on("object:selected",function(opt){opt.target.set(BASIC_SELECTION_PROPERTIES);this.canvas.renderAll();this._setLastObject(opt.target)}.bind(this));this._lastObject=null;this.canvas.on("object:added",function(opt){this._setLastObject(opt.target)}.bind(this));this.canvas.on("object:removed",function(opt){this._checkLastObject(opt.target)}.bind(this));this.master.$element.on("keydown",function(e){if(e.keyCode===65&&(e.ctrlKey||e.metaKey)){if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"CTRLA_SELALL"})}this.selectAll();e.preventDefault()}}.bind(this));lineCustomControlPoints.controlPointColor="#bcd2ff";lineCustomControlPoints.cornerSize=BASIC_SELECTION_PROPERTIES.cornerSize}inherit(SelectionTool,Tool);SelectionTool.BASIC_SELECTION_PROPERTIES=BASIC_SELECTION_PROPERTIES;SelectionTool.prototype.activate=function(){SelectionTool.super.activate.call(this);this.setSelectable(true);this.selectLastObject()};SelectionTool.prototype.deactivate=function(){SelectionTool.super.deactivate.call(this);this.setSelectable(false)};SelectionTool.prototype.setSelectable=function(selectable){this.canvas.selection=selectable;var items=this.canvas.getObjects();for(var i=items.length-1;i>=0;i--){items[i].selectable=selectable}};SelectionTool.prototype.selectAll=function(){this.master.chooseTool("select");this.master.select(this.canvas.getObjects())};SelectionTool.prototype.selectLastObject=function(){if(this._lastObject){this.canvas.setActiveObject(this._lastObject)}};SelectionTool.prototype._setLastObject=function(obj){if(obj._dt_sourceObj){return}this._lastObject=obj};SelectionTool.prototype._checkLastObject=function(removedObj){if(removedObj===this._lastObject){var remainingObjects=this.canvas.getObjects();this._lastObject=remainingObjects[remainingObjects.length-1]}};module.exports=SelectionTool},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var fabric=__webpack_require__(2);var inherit=__webpack_require__(0);var ShapeTool=__webpack_require__(4);var SelectTool=__webpack_require__(8);var Util=__webpack_require__(6);var lineCustomControlPoints=__webpack_require__(7);__webpack_require__(12);function LineTool(name,drawTool,lineType,lineOptions){ShapeTool.call(this,name,drawTool);lineType=lineType||"line";this.bw__lineType=lineOptions&&lineOptions.doubleArrowhead?"doublearrow":lineType;this._lineKlass=fabric.util.getKlass(lineType);this._lineOptions=lineOptions;lineCustomControlPoints(this.canvas)}inherit(LineTool,ShapeTool);LineTool.prototype.mouseDown=function(e){LineTool.super.mouseDown.call(this,e);if(!this.active)return;var loc=this.canvas.getPointer(e.e);var x=loc.x;var y=loc.y;this.curr=new this._lineKlass([x,y,x,y],$.extend(true,{originX:"center",originY:"center",selectable:false,stroke:this.master.state.stroke,strokeWidth:this.master.state.strokeWidth,bw__objId:parent.DIPF_PISA_WRAPPER?parent.DIPF_PISA_WRAPPER.dtGetNextObjId():null,bw__type:this.bw__lineType},this._lineOptions));this.curr.bw__sendEvent=function(e,add){if(parent.DIPF_PISA_WRAPPER){const evData={event:"OBJ_"+e,x1:this.get("x1"),y1:this.get("y1"),x2:this.get("x2"),y2:this.get("y2"),c:this.get("stroke"),objId:this.get("bw__objId"),objType:this.get("bw__type")};parent.DIPF_PISA_WRAPPER.addCommonLogData(evData,this);parent.DIPF_PISA_WRAPPER.sendEvent(evData,add)}};this.curr.on("mousedown",function(){this.bw__sendEvent("CLICK")});this.curr.bw__sendEvent("CREATE");this.canvas.add(this.curr)};LineTool.prototype.mouseMove=function(e){LineTool.super.mouseMove.call(this,e);if(this.down===false){return}var loc=this.canvas.getPointer(e.e);var x=loc.x;var y=loc.y;this.curr.set("x2",x);this.curr.set("y2",y);this.canvas.renderAll()};LineTool.prototype.mouseUp=function(e){this.curr.bw__sendEvent("SET");LineTool.super.mouseUp.call(this,e);this._processNewShape(this.curr);this.canvas.renderAll();this.actionComplete(this.curr);this.curr=undefined;this.master.pushToHistory()};LineTool.prototype._processNewShape=function(s){var x1=s.get("x1");var y1=s.get("y1");var x2=s.get("x2");var y2=s.get("y2");if(Util.dist(x1-x2,y1-y2)<this.minSize){x2=x1+this.defSize;y2=y1+this.defSize;s.set("x2",x2);s.set("y2",y2)}s.setCoords()};module.exports=LineTool},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var fabric=__webpack_require__(2);var EventEmitter2=__webpack_require__(34);var SelectionTool=__webpack_require__(8);var LineTool=__webpack_require__(9);var BasicShapeTool=__webpack_require__(18);var FreeDrawTool=__webpack_require__(19);var TextTool=__webpack_require__(21);var StampTool=__webpack_require__(20);var DeleteTool=__webpack_require__(17);var CloneTool=__webpack_require__(16);var UIManager=__webpack_require__(30);var UndoRedo=__webpack_require__(31);var convertState=__webpack_require__(11);var rescale2resize=__webpack_require__(14);var multitouchSupport=__webpack_require__(13);__webpack_require__(36);var DEF_OPTIONS={width:800,height:600,parseSVG:true};var DEF_STATE={stroke:"#333",fill:"",strokeWidth:8,fontSize:27};var EVENTS={DRAWING_CHANGED:"drawing:changed",STATE_CHANGED:"state:changed",TOOL_CHANGED:"tool:changed",UNDO_POSSIBLE:"undo:possible",UNDO_IMPOSSIBLE:"undo:impossible",REDO_POSSIBLE:"redo:possible",REDO_IMPOSSIBLE:"redo:impossible"};var ADDITIONAL_PROPS_TO_SERIALIZE=["lockUniScaling","bw__objId","bw__type"];function DrawingTool(selector,options,settings){this.selector=selector;this.options=$.extend(true,{},DEF_OPTIONS,options);this.state=$.extend(true,{},DEF_STATE,settings);this._dispatch=new EventEmitter2({wildcard:true,newListener:false,maxListeners:100,delimiter:":"});this._initDOM();this._initFabricJS();this._setDimensions(this.options.width,this.options.height);this._initStores();this._initTools();this._initStateHistory();new UIManager(this);rescale2resize(this.canvas);multitouchSupport(this.canvas);this._fireStateChanged();this.chooseTool("select");this.pushToHistory();if(this.options.backgroundImage){this._setBackgroundImage(this.options.backgroundImage)}if(parent.DIPF_PISA_WRAPPER){this.bw__lastSelObjs=[];["object:selected","selection:created","selection:cleared"].forEach(e=>this.canvas.on(e,this.bw__sendSelected.bind(this)));["scaling","rotating","moving"].forEach(e=>{const evn={scaling:"SCAL",rotating:"ROT",moving:"MOV"}[e];this.canvas.on("object:"+e,ev=>{const obj=ev.target;if(obj.bw__sendEvent){obj.bw__sendEvent("TF_"+evn,parent.DIPF_PISA_WRAPPER.getObjDiffs(obj))}else if(obj._dt_sourceObj&&obj._dt_sourceObj.bw__sendEvent){obj._dt_sourceObj.bw__sendEvent("TF_"+evn,parent.DIPF_PISA_WRAPPER.getObjDiffs(obj))}else if(obj._objects&&obj._objects.length>0){parent.DIPF_PISA_WRAPPER.sendEvent({event:"TF_MULT_"+evn,objIds:obj._objects.map(o=>o.bw__objId)},parent.DIPF_PISA_WRAPPER.getObjDiffs(obj))}})})}}DrawingTool.prototype.bw__sendSelected=function(e){if(!this.bw__sendSelId){this.bw__sendSelId=setTimeout(this.bw__sendSelectedLogs.bind(this))}};DrawingTool.prototype.bw__sendSelectedLogs=function(e){this.bw__sendSelId=null;let currSelObjs=this.getSelection();if(!currSelObjs){currSelObjs=[]}else if(!Array.isArray(currSelObjs)){currSelObjs=[currSelObjs]}const delSelObjs=this.bw__lastSelObjs.filter(obj=>!currSelObjs.includes(obj));delSelObjs.forEach(obj=>obj.bw__sendEvent("DESEL"));const newSelObjs=currSelObjs.filter(obj=>!this.bw__lastSelObjs.includes(obj));newSelObjs.forEach(obj=>obj.bw__sendEvent("SEL"));this.bw__lastSelObjs=currSelObjs};DrawingTool.prototype.ADDITIONAL_PROPS_TO_SERIALIZE=ADDITIONAL_PROPS_TO_SERIALIZE;DrawingTool.prototype.proxy=function(url){return this.options.proxy&&this.options.proxy(url)||url};DrawingTool.prototype.clear=function(clearBackground){this.canvas.clear();if(clearBackground){this.canvas.setBackgroundImage(null)}this.canvas.renderAll();this.pushToHistory()};DrawingTool.prototype.clearSelection=function(){this.canvas.deactivateAllWithDispatch();this.canvas.renderAll()};DrawingTool.prototype.save=function(){var selection=this.getSelection();var selectionCleared=false;if(selection&&(selection.hasCustomControlPoints||selection.length>0)){this.clearSelection();selectionCleared=true}var result=JSON.stringify({version:1,dt:{width:this.canvas.getWidth(),height:this.canvas.getHeight()},canvas:this.canvas.toJSON(ADDITIONAL_PROPS_TO_SERIALIZE)});if(selectionCleared){this.select(selection)}this.notifySave(result);return result};DrawingTool.prototype.load=function(jsonOrObject,callback,noHistoryUpdate){if(!jsonOrObject){this.canvas.clear();this.canvas.setBackgroundImage(null);this.canvas.renderAll();loadFinished.call(this);return}var state={};if(typeof jsonOrObject==="string"||jsonOrObject instanceof String){state=JSON.parse(jsonOrObject)}else{state=jsonOrObject}state=convertState(state);var dtState=state.dt;this._setDimensions(dtState.width,dtState.height);var loadDef=$.Deferred();var bgImgDef=$.Deferred();var canvasState=state.canvas;var backgroundImage=canvasState.backgroundImage;delete canvasState.backgroundImage;this.canvas.loadFromJSON(canvasState,loadDef.resolve.bind(loadDef));if(backgroundImage!==undefined){var imageSrc=backgroundImage.src;delete backgroundImage.src;this._setBackgroundImage(imageSrc,backgroundImage,bgImgDef.resolve.bind(bgImgDef))}else{this._setBackgroundImage(null,null,bgImgDef.resolve.bind(bgImgDef))}$.when(loadDef,bgImgDef).done(loadFinished.bind(this));function loadFinished(){this.tools.select.setSelectable(this.tools.select.active);if(!noHistoryUpdate){this.pushToHistory()}if(typeof callback==="function"){callback()}}};DrawingTool.prototype.pushToHistory=function(){this._history.saveState();this._fireHistoryEvents();this._fireDrawingChanged()};DrawingTool.prototype.undo=function(){this._history.undo();this._fireHistoryEvents();this._fireDrawingChanged()};DrawingTool.prototype.redo=function(){this._history.redo();this._fireHistoryEvents();this._fireDrawingChanged()};DrawingTool.prototype.resetHistory=function(){this._history.reset();this._history.saveState();this._fireHistoryEvents()};DrawingTool.prototype._fireHistoryEvents=function(){if(this._history.canUndo()){this._dispatch.emit(EVENTS.UNDO_POSSIBLE)}else{this._dispatch.emit(EVENTS.UNDO_IMPOSSIBLE)}if(this._history.canRedo()){this._dispatch.emit(EVENTS.REDO_POSSIBLE)}else{this._dispatch.emit(EVENTS.REDO_IMPOSSIBLE)}};DrawingTool.prototype._fireDrawingChanged=function(){this._dispatch.emit(EVENTS.DRAWING_CHANGED)};DrawingTool.prototype.setStrokeColor=function(color){if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"STROKCOL_SET",val:color,old:this.state.stroke})}this.state.stroke=color;this._fireStateChanged()};DrawingTool.prototype.setStrokeWidth=function(width){this.state.strokeWidth=width;this._fireStateChanged()};DrawingTool.prototype.setFontSize=function(fontSize){if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"FONTSIZE_SET",val:fontSize,old:this.state.fontSize})}this.state.fontSize=fontSize;this._fireStateChanged()};DrawingTool.prototype.setFillColor=function(color){if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"FILLCOL_SET",val:color,old:this.state.fill})}this.state.fill=color;this._fireStateChanged()};DrawingTool.prototype.setSelectionStrokeColor=function(color){if(!this.getSelection())return;this.forEachSelectedObject(function(obj){obj.bw__sendEvent("STROKCOL_SET",{c:color,old:obj.get("stroke")});this._setObjectProp(obj,"stroke",color)}.bind(this));this.canvas.renderAll();this.pushToHistory()};DrawingTool.prototype.setSelectionFillColor=function(color){if(!this.getSelection())return;this.forEachSelectedObject(function(obj){obj.bw__sendEvent("FILLCOL_SET",{f:color,old:obj.get("fill")});this._setObjectProp(obj,"fill",color)}.bind(this));this.canvas.renderAll();this.pushToHistory()};DrawingTool.prototype.setSelectionStrokeWidth=function(width){if(!this.getSelection())return;this.forEachSelectedObject(function(obj){this._setObjectProp(obj,"strokeWidth",width)}.bind(this));this.canvas.renderAll();this.pushToHistory()};DrawingTool.prototype.setSelectionFontSize=function(fontSize){if(!this.getSelection())return;this.forEachSelectedObject(function(obj){if(obj.type==="i-text"){obj.bw__sendEvent("FONTSIZE_SET",{fs:fontSize,old:obj.get("fontSize")});this._setObjectProp(obj,"fontSize",fontSize)}}.bind(this));this.canvas.renderAll();this.pushToHistory()};DrawingTool.prototype.sendSelectionToFront=function(){if(!this.getSelection())return;this._sendSelectionTo("front");this.pushToHistory()};DrawingTool.prototype.sendSelectionToBack=function(){if(!this.getSelection())return;this._sendSelectionTo("back");this.pushToHistory()};DrawingTool.prototype.forEachSelectedObject=function(callback){if(this.canvas.getActiveObject()){callback(this.canvas.getActiveObject())}else if(this.canvas.getActiveGroup()){this.canvas.getActiveGroup().getObjects().forEach(callback)}};DrawingTool.prototype._setObjectProp=function(object,type,value){if(object.type==="i-text"){if(type==="stroke"){type="fill"}else if(type==="fill"){return}else if(type==="strokeWidth"){return}}object.set(type,value)};DrawingTool.prototype._sendSelectionTo=function(where){if(this.canvas.getActiveObject()){send(this.canvas.getActiveObject())}else if(this.canvas.getActiveGroup()){var objects=this.canvas.getActiveGroup().getObjects();this.clearSelection();objects.forEach(send);this.select(objects)}function send(obj){if(obj._dt_sourceObj){send(obj._dt_sourceObj);return}if(where==="front"){obj.bringToFront();if(obj._dt_controlPoints){obj._dt_controlPoints.forEach(function(cp){cp.bringToFront()})}}else{if(obj._dt_controlPoints){obj._dt_controlPoints.forEach(function(cp){cp.sendToBack()})}obj.sendToBack()}}};DrawingTool.prototype.setBackgroundImage=function(imageSrc,fit,callback){this._setBackgroundImage(imageSrc,null,function(){switch(fit){case"resizeBackgroundToCanvas":this.resizeBackgroundToCanvas();break;case"resizeCanvasToBackground":this.resizeCanvasToBackground();break;case"shrinkBackgroundToCanvas":this.shrinkBackgroundToCanvas();break}this.pushToHistory();if(typeof callback==="function"){callback()}}.bind(this))};DrawingTool.prototype.resizeBackgroundToCanvas=function(){if(!this.canvas.backgroundImage){return}this.canvas.backgroundImage.set({width:this.canvas.width,height:this.canvas.height});this.canvas.renderAll();this.pushToHistory()};DrawingTool.prototype.shrinkBackgroundToCanvas=function(){if(!this.canvas.backgroundImage){return}var bgImg=this.canvas.backgroundImage;var widthRatio=this.canvas.width/bgImg.width;var heightRatio=this.canvas.height/bgImg.height;var minRatio=Math.min(widthRatio,heightRatio);if(minRatio<1){bgImg.set({width:bgImg.width*minRatio,height:bgImg.height*minRatio});this.canvas.renderAll();this.pushToHistory()}};DrawingTool.prototype.resizeCanvasToBackground=function(){if(!this.canvas.backgroundImage){return}this._setDimensions(this.canvas.backgroundImage.width,this.canvas.backgroundImage.height);this.canvas.backgroundImage.set({top:this.canvas.height/2,left:this.canvas.width/2});this.canvas.renderAll();this.pushToHistory()};DrawingTool.prototype.setDimensions=function(width,height){this._setDimensions(width,height);this.pushToHistory()};DrawingTool.prototype.calcOffset=function(){this.canvas.calcOffset()};DrawingTool.prototype.chooseTool=function(toolSelector){var newTool=this.tools[toolSelector];if(!newTool){return}if(this.currentTool===newTool){this.currentTool.activateAgain();return}if(newTool.singleUse===true){newTool.use();return}if(this.currentTool!==undefined){this.currentTool.setActive(false)}this.currentTool=newTool;this.currentTool.setActive(true);this._dispatch.emit(EVENTS.TOOL_CHANGED,toolSelector);this.canvas.renderAll()};DrawingTool.prototype.changeOutOfTool=function(){this.chooseTool("select")};DrawingTool.prototype.on=function(){this._dispatch.on.apply(this._dispatch,arguments)};DrawingTool.prototype.off=function(){this._dispatch.off.apply(this._dispatch,arguments)};DrawingTool.prototype.select=function(objectOrObjects){this.clearSelection();if(!objectOrObjects){return}if(objectOrObjects.length===1){objectOrObjects=objectOrObjects[0]}if(!objectOrObjects.length){this.canvas.setActiveObject(objectOrObjects);return}var group=new fabric.Group(objectOrObjects,{originX:"center",originY:"center",canvas:this.canvas});group.addWithUpdate();this.canvas.setActiveGroup(group)};DrawingTool.prototype.getSelection=function(){var actGroup=this.canvas.getActiveGroup();if(actGroup){return actGroup.getObjects()}var actObject=this.canvas.getActiveObject();return actObject&&actObject.isControlPoint?actObject._dt_sourceObj:actObject};DrawingTool.prototype._fireStateChanged=function(){this._dispatch.emit(EVENTS.STATE_CHANGED,this.state)};DrawingTool.prototype._setBackgroundImage=function(imageSrc,options,backgroundLoadedCallback){options=options||{originX:"center",originY:"center",top:this.canvas.height/2,left:this.canvas.width/2,crossOrigin:"anonymous"};var self=this;if(!imageSrc){this.canvas.setBackgroundImage(null,bgLoaded)}else{imageSrc=this.proxy(imageSrc);loadImage()}function loadImage(){fabric.util.loadImage(imageSrc,callback,null,options.crossOrigin)}function callback(img){if((options.crossOrigin==="anonymous"||options.crossOrigin==="")&&!img){options=$.extend(true,{},options);delete options.crossOrigin;console.log("Background could not be loaded due to lack of CORS headers. Trying to load it again without CORS support.");loadImage();return}self.canvas.setBackgroundImage(new fabric.Image(img,options),bgLoaded)}function bgLoaded(){if(typeof backgroundLoadedCallback==="function"){backgroundLoadedCallback()}self.canvas.renderAll()}};DrawingTool.prototype._initTools=function(){this.tools={select:new SelectionTool("Selection Tool",this),line:new LineTool("Line Tool",this),arrow:new LineTool("Arrow Tool",this,"arrow"),doubleArrow:new LineTool("Double Arrow Tool",this,"arrow",{doubleArrowhead:true}),rect:new BasicShapeTool("Rectangle Tool",this,"rect"),ellipse:new BasicShapeTool("Ellipse Tool",this,"ellipse"),square:new BasicShapeTool("Square Tool",this,"square"),circle:new BasicShapeTool("Circle Tool",this,"circle"),free:new FreeDrawTool("Free Draw Tool",this),stamp:new StampTool("Stamp Tool",this,this.options.parseSVG),text:new TextTool("Text Tool",this),trash:new DeleteTool("Delete Tool",this)}};DrawingTool.prototype._initDOM=function(){$(this.selector).empty();this.$element=$('<div class="dt-container">').appendTo(this.selector);var $canvasContainer=$('<div class="dt-canvas-container">').attr("tabindex",0).appendTo(this.$element);this.$canvas=$("<canvas>").appendTo($canvasContainer)};DrawingTool.prototype._initFabricJS=function(){this.canvas=new fabric.Canvas(this.$canvas[0]);if(fabric.isTouchSupported||!this.options.parseSVG){this.canvas.perPixelTargetFind=false}else{this.canvas.perPixelTargetFind=true;this.canvas.targetFindTolerance=12}this.canvas.setBackgroundColor("#fff")};DrawingTool.prototype._setDimensions=function(width,height){this.canvas.setDimensions({width:width,height:height});var pixelRatio=window.devicePixelRatio||1;if(pixelRatio!==1){var canvEl=this.canvas.getElement();$(canvEl).attr("width",width*pixelRatio).attr("height",height*pixelRatio).css("width",width).css("height",height);canvEl.getContext("2d").scale(pixelRatio,pixelRatio)}};DrawingTool.prototype._initStateHistory=function(){this._history=new UndoRedo(this);this.canvas.on("object:modified",function(){this.pushToHistory()}.bind(this))};DrawingTool.prototype._initStores=function(){this.stores=[]};DrawingTool.prototype.addStore=function(storeImp){var loadFunction=this.load.bind(this);var stores=this.stores;if(stores.indexOf(storeImp)==-1){storeImp.setLoadFunction(loadFunction);this.stores.push(storeImp)}};DrawingTool.prototype.notifySave=function(serializedJson){var store=null;var stores=this.stores||[];for(var i=0;i<stores.length;i++){store=stores[i];if(typeof store.save==="function"){try{store.save(serializedJson)}catch(problem){console.error("unable to call `save(serializedJson)` on store");console.error(problem)}}else{console.error("store does not implement required `save(serializedJson)` function!")}}};module.exports=DrawingTool},function(module,exports){var stateConverter={0:convertVer0toVer1};function convertVer0toVer1(state){state.canvas.objects.forEach(function(obj){if(obj.type==="path"){obj.pathOffset.x=obj.left;obj.pathOffset.y=obj.top;var offsetX=obj.left-obj.width*.5;var offsetY=obj.top-obj.height*.5;var path=obj.path;for(var i=0;i<path.length;i++){var def=path[i];for(var j=1;j<def.length;j++){if(j%2===1){def[j]+=offsetX}else{def[j]+=offsetY}}}}});state.version=1;return state}function convertState(state){if(typeof state.version==="undefined"){state.version=0}while(stateConverter[state.version]){state=stateConverter[state.version](state)}return state}module.exports=convertState},function(module,exports,__webpack_require__){var fabric=__webpack_require__(2);(function(){"use strict";var extend=fabric.util.object.extend;if(fabric.Arrow){fabric.warn("fabric.Arrow is already defined");return}fabric.Arrow=fabric.util.createClass(fabric.Line,{type:"arrow",doubleArrowhead:false,_render:function(ctx){ctx.beginPath();var isInPathGroup=this.group&&this.group.type==="path-group";if(isInPathGroup&&!this.transformMatrix){var cp=this.getCenterPoint();ctx.translate(-this.group.width/2+cp.x,-this.group.height/2+cp.y)}if(!this.strokeDashArray){var xMult=this.x1<=this.x2?-1:1,yMult=this.y1<=this.y2?-1:1;var xs=this.width===1?0:xMult*this.width/2,ys=this.height===1?0:yMult*this.height/2;var xe=this.width===1?0:xMult*-1*this.width/2,ye=this.height===1?0:yMult*-1*this.height/2;var dx=xe-xs,dy=ye-ys,l=Math.sqrt(dx*dx+dy*dy);var s=this.strokeWidth*.5;var ls=Math.min(s*3,l*(this.doubleArrowhead?.21:.35));var ahlx=ls*2*dx/l,ahly=ls*2*dy/l;var xm1=xe-ahlx,ym1=ye-ahly;var xm2=xe-ahlx*1.1,ym2=ye-ahly*1.1;var points;if(!this.doubleArrowhead){points=[this._perpCoords(xs,ys,xe,ye,xs,ys,s*.5,1),this._perpCoords(xs,ys,xe,ye,xs,ys,s*.5,-1)]}else{var xm3=xs+ahlx,ym3=ys+ahly;var xm4=xs+ahlx*1.1,ym4=ys+ahly*1.1;points=[this._perpCoords(xs,ys,xe,ye,xm3,ym3,s,1),this._perpCoords(xs,ys,xe,ye,xm4,ym4,ls,1),[xs,ys],this._perpCoords(xs,ys,xe,ye,xm4,ym4,ls,-1),this._perpCoords(xs,ys,xe,ye,xm3,ym3,s,-1)]}points.push(this._perpCoords(xs,ys,xe,ye,xm1,ym1,s,-1),this._perpCoords(xs,ys,xe,ye,xm2,ym2,ls,-1),[xe,ye],this._perpCoords(xs,ys,xe,ye,xm2,ym2,ls,1),this._perpCoords(xs,ys,xe,ye,xm1,ym1,s,1));ctx.moveTo(points[0][0],points[0][1]);points.forEach(function(p){ctx.lineTo(p[0],p[1])})}if(this.stroke){var origFillStyle=ctx.fillStyle;ctx.fillStyle=this.stroke;this._renderFill(ctx);ctx.fillStyle=origFillStyle}},_perpCoords:function(xa,ya,xb,yb,x,y,l,dir){var dx=xb-xa,dy=yb-ya,k=l/Math.sqrt(dx*dx+dy*dy);return[x+k*-dy*dir,y+k*dx*dir]},toObject:function(propertiesToInclude){return extend(this.callSuper("toObject",propertiesToInclude),{doubleArrowhead:this.get("doubleArrowhead")})}});fabric.Arrow.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" "));fabric.Arrow.fromElement=function(element,options){var parsedAttributes=fabric.parseAttributes(element,fabric.Line.ATTRIBUTE_NAMES),points=[parsedAttributes.x1||0,parsedAttributes.y1||0,parsedAttributes.x2||0,parsedAttributes.y2||0];return new fabric.Arrow(points,extend(parsedAttributes,options))};fabric.Arrow.fromObject=function(object){var points=[object.x1,object.y1,object.x2,object.y2];return new fabric.Arrow(points,object)}})()},function(module,exports,__webpack_require__){var fabric=__webpack_require__(2);module.exports=function addMultiTouchSupport(canvas){if(typeof Hammer==="undefined"||!fabric.isTouchSupported){return}var mc=new Hammer.Manager(canvas.upperCanvasEl);mc.add(new Hammer.Pinch);var initialAngle;var initialScale;var shouldCenterOrigin;var originalOriginX;var originalOriginY;mc.on("pinchstart",function(e){var target=getTarget();if(!target||isLine(target)){return}setLocked(target,true);initialAngle=target.get("angle");initialScale=target.get("scaleX");shouldCenterOrigin=target.originX!=="center"||target.originY!=="center";if(shouldCenterOrigin){setOriginToCenter(target)}});mc.on("pinchmove",function(e){var target=getTarget();if(!target||isLine(target)){return}target.set({scaleX:e.scale*initialScale,scaleY:e.scale*initialScale,angle:initialAngle+e.rotation});fire(target,"scaling",e.srcEvent);fire(target,"rotating",e.srcEvent);if(target.get("scaleX")!==e.scale*initialScale){initialScale=1/e.scale}});mc.on("pinchend",function(e){var target=getTarget();if(!target||isLine(target)){return}if(shouldCenterOrigin){resetOrigin(target)}setLocked(target,false)});function isLine(object){return object.type==="line"||object.type==="arrow"}function getTarget(){return canvas.getActiveObject()||canvas.getActiveGroup()}function setLocked(target,v){target.set({lockMovementX:v,lockMovementY:v,lockScalingX:v,lockScalingY:v})}function fire(target,eventName,e){canvas.fire("object:"+eventName,{target:target,e:e});target.fire(eventName,{e:e})}function setOriginToCenter(object){originalOriginX=object.originX;originalOriginY=object.originY;var center=object.getCenterPoint();object.originX="center";object.originY="center";object.left=center.x;object.top=center.y}function resetOrigin(object){var originPoint=object.translateToOriginPoint(object.getCenterPoint(),originalOriginX,originalOriginY);object.originX=originalOriginX;object.originY=originalOriginY;object.left=originPoint.x;object.top=originPoint.y}}},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var fabric=__webpack_require__(2);var LineTool=__webpack_require__(9);function basicWidthHeightTransform(s){s.width=s.width*s.scaleX+s.strokeWidth*(s.scaleX-1);s.height=s.height*s.scaleY+s.strokeWidth*(s.scaleY-1);s.scaleX=1;s.scaleY=1}var duringResize={rect:function(s){basicWidthHeightTransform(s)},ellipse:function(s){basicWidthHeightTransform(s);s.rx=Math.abs(s.width/2);s.ry=Math.abs(s.height/2)},line:function(s){basicWidthHeightTransform(s);if(s.x1>s.x2){s.x1=s.left+s.width;s.x2=s.left}else{s.x2=s.left+s.width;s.x1=s.left}if(s.y1>s.y2){s.y1=s.top+s.height;s.y2=s.top}else{s.y2=s.top+s.height;s.y1=s.top}},arrow:function(s){this.line(s)},path:function(s){var offsetX=s.pathOffset.x;var offsetY=s.pathOffset.y;for(var i=0;i<s.path.length;i++){s.path[i][1]=(s.path[i][1]-offsetX)*s.scaleX+offsetX;s.path[i][2]=(s.path[i][2]-offsetY)*s.scaleY+offsetY;s.path[i][3]=(s.path[i][3]-offsetX)*s.scaleX+offsetX;s.path[i][4]=(s.path[i][4]-offsetY)*s.scaleY+offsetY}basicWidthHeightTransform(s)}};var afterResize=$.extend(true,{},duringResize,{"i-text":function(s){s.set({fontSize:s.get("fontSize")*s.get("scaleX"),strokeWidth:s.get("strokeWidth")*s.get("scaleX"),scaleX:1,scaleY:1});s.setCoords()}});module.exports=function rescale2resize(canvas){canvas.on("object:scaling",function(opt){var shape=opt.target;var type=shape.type;if(duringResize[type]){duringResize[type](shape)}});canvas.on("object:modified",function(opt){var shape=opt.target;var type=shape.type;if((shape.scaleX!==1||shape.scaleY!==1)&&afterResize[type]){afterResize[type](shape)}});fabric.Group.prototype.lockUniScaling=true;canvas.on("before:selection:cleared",function(opt){var group=opt.target;if(group.type!=="group"||group.scaleX===1){return}var scale=group.scaleX;var items=group.getObjects();var tempStrokeWidth;for(var i=0;i<items.length;i++){if(afterResize[items[i].type]!==undefined){tempStrokeWidth=items[i].strokeWidth;items[i].strokeWidth=0;items[i].scaleX=scale;items[i].scaleY=scale;afterResize[items[i].type](items[i]);items[i].strokeWidth=tempStrokeWidth*scale;items[i].scaleX=1/scale;items[i].scaleY=1/scale}}})}},function(module,exports,__webpack_require__){var $=__webpack_require__(1);$.fn.longPress=function(listener,timeout){return this.on("mousedown touchstart",function(e){var timer;timer=setTimeout(function(){listener.call(this,e)},timeout||150);$(window).one("mouseup touchend touchcancel touchleave",function(){clearTimeout(timer)})})}},function(module,exports,__webpack_require__){var fabric=__webpack_require__(2);var inherit=__webpack_require__(0);var Tool=__webpack_require__(5);var CLONE_OFFSET=15;function CloneTool(name,drawingTool){Tool.call(this,name,drawingTool);this.singleUse=true;this._clipboard=null;this.master.$element.on("keydown",function(e){if(this._inTextEditMode()){return}if(e.keyCode===67&&(e.ctrlKey||e.metaKey)){this.copy();e.preventDefault()}if(e.keyCode===86&&(e.ctrlKey||e.metaKey)){this.paste();e.preventDefault()}}.bind(this))}inherit(CloneTool,Tool);CloneTool.prototype.use=function(){this.copy(function(){this.paste()}.bind(this))};CloneTool.prototype.copy=function(callback){var activeObject=this.canvas.getActiveGroup()||this.canvas.getActiveObject();if(!activeObject){return}if(activeObject._dt_sourceObj){activeObject=activeObject._dt_sourceObj}var klass=fabric.util.getKlass(activeObject.type);var propsToInclude=this.master.ADDITIONAL_PROPS_TO_SERIALIZE;if(klass.async){activeObject.clone(function(clonedObject){this._updateClipboard(clonedObject);if(typeof callback==="function"){callback()}}.bind(this),propsToInclude)}else{this._updateClipboard(activeObject.clone(null,propsToInclude));if(typeof callback==="function"){callback()}}};CloneTool.prototype.paste=function(){if(!this._clipboard){return}var clonedObject=this._clipboard;this.canvas.deactivateAllWithDispatch();clonedObject.set({left:clonedObject.left+CLONE_OFFSET,top:clonedObject.top+CLONE_OFFSET});clonedObject.setCoords();if(clonedObject.type==="group"){clonedObject.getObjects().forEach(function(o){this.canvas.add(o)}.bind(this));this.canvas.setActiveGroup(clonedObject)}else{this.canvas.add(clonedObject);this.canvas.setActiveObject(clonedObject)}this.canvas.renderAll();this.master.pushToHistory();this._clipboard=null;this.copy()};CloneTool.prototype._updateClipboard=function(clonedObject){this._clipboard=clonedObject};CloneTool.prototype._inTextEditMode=function(){var activeObject=this.canvas.getActiveObject();return activeObject&&activeObject.isEditing};module.exports=CloneTool},function(module,exports,__webpack_require__){var inherit=__webpack_require__(0);var Tool=__webpack_require__(5);function DeleteTool(name,drawTool){Tool.call(this,name,drawTool);this.singleUse=true;this.master.$element.on("keydown",function(e){if(e.keyCode===8){if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"DELBAK"})}this.use();e.preventDefault()}}.bind(this))}inherit(DeleteTool,Tool);DeleteTool.prototype.use=function(){var canvas=this.canvas;if(canvas.getActiveObject()){canvas.getActiveObject().bw__sendEvent("DEL");canvas.remove(canvas.getActiveObject());this.master.pushToHistory()}else if(canvas.getActiveGroup()){canvas.getActiveGroup().forEachObject(function(o){o.bw__sendEvent("DEL_GRP");canvas.remove(o)});canvas.discardActiveGroup().renderAll();this.master.pushToHistory()}};module.exports=DeleteTool},function(module,exports,__webpack_require__){var fabric=__webpack_require__(2);var inherit=__webpack_require__(0);var ShapeTool=__webpack_require__(4);var Util=__webpack_require__(6);var SUPPORTED_SHAPES={rect:{fabricType:"rect"},square:{fabricType:"rect",uniform:true},ellipse:{fabricType:"ellipse",radius:true},circle:{fabricType:"ellipse",uniform:true,radius:true}};function BasicShapeTool(name,drawTool,type){ShapeTool.call(this,name,drawTool);this._type=SUPPORTED_SHAPES[type];this.bw__type=type;this._shapeKlass=fabric.util.getKlass(this._type.fabricType)}inherit(BasicShapeTool,ShapeTool);BasicShapeTool.prototype.mouseDown=function(e){BasicShapeTool.super.mouseDown.call(this,e);if(!this.active){return}var loc=this.canvas.getPointer(e.e);var x=loc.x;var y=loc.y;this.curr=new this._shapeKlass({top:y,bw__top:y,left:x,bw__left:x,width:0,height:0,selectable:false,lockUniScaling:this._type.uniform,fill:this.master.state.fill,stroke:this.master.state.stroke,strokeWidth:this.master.state.strokeWidth,bw__objId:parent.DIPF_PISA_WRAPPER?parent.DIPF_PISA_WRAPPER.dtGetNextObjId():null,bw__type:this.bw__type});this.curr.bw__sendEvent=function(e,add){if(parent.DIPF_PISA_WRAPPER){const evData={event:"OBJ_"+e,left:this.get("left"),top:this.get("top"),width:this.get("width"),height:this.get("height"),c:this.get("stroke"),objId:this.get("bw__objId"),objType:this.get("bw__type")};const f=this.get("fill");if(f){evData.f=f}const rx=this.get("rx");if(rx){evData.rx=rx;evData.ry=this.get("ry")}parent.DIPF_PISA_WRAPPER.addCommonLogData(evData,this);parent.DIPF_PISA_WRAPPER.sendEvent(evData,add)}};this.curr.on("mousedown",function(){this.bw__sendEvent("CLICK")});this.curr.bw__sendEvent("CREATE");this.canvas.add(this.curr)};BasicShapeTool.prototype.mouseMove=function(e){BasicShapeTool.super.mouseMove.call(this,e);if(this.down===false){return}var loc=this.canvas.getPointer(e.e);var width=loc.x-this.curr.bw__left;var height=loc.y-this.curr.bw__top;if(this._type.uniform){if(Math.abs(width)<Math.abs(height)){height=Math.abs(width)*sign(height)}else{width=Math.abs(height)*sign(width)}}const setobj={left:this.curr.bw__left,top:this.curr.bw__top,width:Math.abs(width),height:Math.abs(height)};if(width<0){setobj.left=this.curr.bw__left+width}if(height<0){setobj.top=this.curr.bw__top+height}this.curr.set(setobj);if(this._type.radius){this.curr.set({rx:Math.abs(width/2),ry:Math.abs(height/2)})}this.canvas.renderAll()};function sign(num){return num>=0?1:-1}BasicShapeTool.prototype.mouseUp=function(e){this.curr.bw__sendEvent("SET");BasicShapeTool.super.mouseUp.call(this,e);this._processNewShape(this.curr);this.canvas.renderAll();this.actionComplete(this.curr);this.curr=undefined;this.master.pushToHistory()};BasicShapeTool.prototype._processNewShape=function(s){this.convertToPositiveDimensions(s);if(Math.max(s.width,s.height)<this.minSize){s.set("width",this.defSize);s.set("height",this.defSize);if(this._type.radius){s.set("rx",this.defSize/2);s.set("ry",this.defSize/2)}this.moveObjectLeftTop(s)}this.setCentralOrigin(s);s.setCoords()};module.exports=BasicShapeTool},function(module,exports,__webpack_require__){var inherit=__webpack_require__(0);var ShapeTool=__webpack_require__(4);function FreeDrawTool(name,drawTool){ShapeTool.call(this,name,drawTool);var self=this;self.canvas.freeDrawingBrush.color=this.master.state.stroke;self.canvas.freeDrawingBrush.width=this.master.state.strokeWidth;this.master.on("state:changed",function(e){self.canvas.freeDrawingBrush.color=self.master.state.stroke;self.canvas.freeDrawingBrush.width=self.master.state.strokeWidth})}inherit(FreeDrawTool,ShapeTool);FreeDrawTool.prototype.mouseDown=function(opt){FreeDrawTool.super.mouseDown.call(this,opt);if(!this.active){return}if(!this.canvas.isDrawingMode){this.canvas.isDrawingMode=true;this.canvas._onMouseDownInDrawingMode(opt.e)}};FreeDrawTool.prototype.mouseUp=function(opt){var objects=this.canvas.getObjects();var lastObject=objects[objects.length-1];this.curr=lastObject;this.curr.fill=this.master.state.fill;FreeDrawTool.super.mouseUp.call(this,opt);if(!this._locked){this.canvas.isDrawingMode=false}this.actionComplete(lastObject);this.curr=undefined;this.master.pushToHistory()};FreeDrawTool.prototype.deactivate=function(){FreeDrawTool.super.deactivate.call(this);this.canvas.isDrawingMode=false};module.exports=FreeDrawTool},function(module,exports,__webpack_require__){var fabric=__webpack_require__(2);var inherit=__webpack_require__(0);var ShapeTool=__webpack_require__(4);function StampTool(name,drawTool,parseSVG){ShapeTool.call(this,name,drawTool);this._parseSVG=parseSVG;this._stamp=null;this._curr=null;this._startX=null;this._startY=null}inherit(StampTool,ShapeTool);StampTool.prototype.mouseDown=function(e){StampTool.super.mouseDown.call(this,e);if(!this.active||!this._stamp)return;var loc=this.canvas.getPointer(e.e);this._startX=loc.x;this._startY=loc.y;const bw__re=this.getStampSrc().match(/\/([^./]+)\..{3,5}$/);this._stamp.clone(function(clonedStamp){clonedStamp.set({left:this._startX,top:this._startY,scaleX:1,scaleY:1,originX:"center",originY:"center",selectable:false,bw__objId:parent.DIPF_PISA_WRAPPER?parent.DIPF_PISA_WRAPPER.dtGetNextObjId():null,bw__type:"stamp "+(bw__re?bw__re[1]:"")});this._curr=clonedStamp;this._curr.bw__sendEvent=function(e,add){if(parent.DIPF_PISA_WRAPPER){const evData={event:"OBJ_"+e,left:this.get("left"),top:this.get("top"),scaleX:this.get("scaleX"),scaleY:this.get("scaleY"),objId:this.get("bw__objId"),objType:this.get("bw__type")};parent.DIPF_PISA_WRAPPER.addCommonLogData(evData,this);parent.DIPF_PISA_WRAPPER.sendEvent(evData,add)}};this._curr.on("mousedown",function(){this.bw__sendEvent("CLICK")});this._curr.bw__sendEvent("CREATE");this.canvas.add(this._curr)}.bind(this))};StampTool.prototype.mouseMove=function(e){StampTool.super.mouseMove.call(this,e);if(this.down===false||!this._curr)return;var loc=this.canvas.getPointer(e.e);var width=loc.x-this._startX;var height=loc.y-this._startY;var imgAspectRatio=this._stamp.width/this._stamp.height||1;if(Math.abs(width/height)>imgAspectRatio){width=sign(width)*Math.abs(height)*imgAspectRatio}else{height=sign(height)*Math.abs(width)/imgAspectRatio}this._curr.set({scaleX:Math.abs(width)/this._stamp.width,scaleY:Math.abs(height)/this._stamp.height,left:this._startX+width*.5,top:this._startY+height*.5});this.canvas.renderAll()};function sign(num){return num>=0?1:-1}StampTool.prototype.mouseUp=function(e){this._curr.bw__sendEvent("SET");StampTool.super.mouseUp.call(this,e);if(!this._curr)return;this._processNewShape(this._curr);this.canvas.renderAll();this.actionComplete(this._curr);this._curr=undefined;this.master.pushToHistory()};StampTool.prototype.loadImage=function(url,callback){if(this._parseSVG&&url.toLowerCase().substr(-4)===".svg"){this._loadSVGImage(url,callback)}else{this._loadNonSVGImage(url,callback)}};StampTool.prototype.setStampObject=function(stamp){this._stamp=stamp};StampTool.prototype.getStampSrc=function(){return this._stamp&&this._stamp._dt_sourceURL};StampTool.prototype._processNewShape=function(s){if(Math.max(s.width*s.scaleX,s.height*s.scaleY)<this.minSize){s.set({scaleX:1,scaleY:1})}s.setCoords()};StampTool.prototype._loadSVGImage=function(url,callback){fabric.loadSVGFromURL(url,function(objects,options){var fabricObj=fabric.util.groupSVGElements(objects,options);fabricObj._dt_sourceURL=url;callback(fabricObj,this._renderToImage(fabricObj))}.bind(this))};StampTool.prototype._loadNonSVGImage=function(url,callback){fabric.util.loadImage(url,function(img){var fabricObj=new fabric.Image(img,{crossOrigin:img.crossOrigin});fabricObj._dt_sourceURL=url;callback(fabricObj,img)},null,"anonymous")};StampTool.prototype._renderToImage=function(fabricObj){var canv=new fabric.Canvas(document.createElement("canvas"));canv.setDimensions({width:fabricObj.width,height:fabricObj.height});canv.add(fabricObj).renderAll();var img=new Image;img.src=canv.toDataURL();return img};module.exports=StampTool},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var fabric=__webpack_require__(2);var inherit=__webpack_require__(0);var ShapeTool=__webpack_require__(4);function TextTool(name,drawTool){ShapeTool.call(this,name,drawTool);this.canvas.on("text:editing:exited",function(opt){if(this.active){opt.target.selectable=false}this._pushToHistoryIfModified(opt.target)}.bind(this))}inherit(TextTool,ShapeTool);TextTool.prototype.mouseDown=function(opt){if(opt.target&&opt.target.isEditing)return;TextTool.super.mouseDown.call(this,opt);var target=this.canvas.findTarget(opt.e);if(target&&target.type==="i-text"){this.editText(target,opt.e);return}if(!this.active||opt.e._dt_doNotCreateNewTextObj)return;var loc=this.canvas.getPointer(opt.e);var x=loc.x;var y=loc.y;var text=new fabric.IText("",{left:x,top:y,lockUniScaling:true,fontFamily:"Arial",fontSize:this.master.state.fontSize,fill:this.master.state.stroke,bw__objId:parent.DIPF_PISA_WRAPPER?parent.DIPF_PISA_WRAPPER.dtGetNextObjId():null,bw__type:"Text"});text.bw__sendEvent=function(e,add){if(parent.DIPF_PISA_WRAPPER){const evData={event:"OBJ_"+e,left:this.get("left"),top:this.get("top"),c:this.get("stroke")||this.get("fill"),f:this.get("fill"),fs:this.get("fontSize"),objId:this.get("bw__objId"),objType:this.get("bw__type")};const t=this.get("text");if(t){evData.t=t}parent.DIPF_PISA_WRAPPER.addCommonLogData(evData,this);parent.DIPF_PISA_WRAPPER.sendEvent(evData,add)}};[["mousedown","CLICK"],["editing:entered","EDIT_START"],["editing:exited","EDIT_END"],["changed","CHANGED"]].forEach(ar=>{text.on(ar[0],function(){this.bw__sendEvent(ar[1])})});text.bw__sendEvent("CREATE");this.actionComplete(text);this.canvas.add(text);this.editText(text,opt.e);opt.e.preventDefault()};TextTool.prototype.activate=function(){TextTool.super.activate.call(this,true)};TextTool.prototype.deactivate=function(){TextTool.super.deactivate.call(this);this.exitTextEditing()};TextTool.prototype.exitTextEditing=function(){var activeObj=this.canvas.getActiveObject();if(activeObj&&activeObj.isEditing){this.canvas.deactivateAllWithDispatch()}};TextTool.prototype.editText=function(text,e){this.canvas.setActiveObject(text);text.enterEditing();text.setCursorByClick(e);if(text.hiddenTextarea&&text.canvas){text.canvas.wrapperEl.appendChild(text.hiddenTextarea);if(fabric.isTouchSupported){$(text.hiddenTextarea).css({left:"0px",top:e.pageY||0,"font-size":"50px"})}text.hiddenTextarea.focus()}this._exitTextEditingOnFirstClick()};TextTool.prototype._exitTextEditingOnFirstClick=function(){var self=this;var canvas=this.canvas;addHandlers();function addHandlers(){window.addEventListener("mousedown",handler,true);window.addEventListener("touchstart",handler,true)}function cleanupHandlers(){window.removeEventListener("mousedown",handler,true);window.removeEventListener("touchstart",handler,true)}function handler(e){if($(e.target).closest(".dt-keep-text-edit-mode").length>0){return}var target=canvas.findTarget(e);var activeObj=canvas.getActiveObject();if(target!==activeObj&&activeObj&&activeObj.isEditing){cleanupHandlers();self.exitTextEditing();e._dt_doNotCreateNewTextObj=true}}};TextTool.prototype._pushToHistoryIfModified=function(obj){if(obj.text!==obj._dt_lastText){this.master.pushToHistory();obj._dt_lastText=obj.text}};module.exports=TextTool},function(module,exports,__webpack_require__){var inherit=__webpack_require__(0);var BasicButton=__webpack_require__(3);function ColorButton(options,ui,drawingTool){var callback;if(options.type==="stroke"){callback=function(){this.dt.setStrokeColor(options.color);this.dt.setSelectionStrokeColor(options.color)}}else{callback=function(){this.dt.setFillColor(options.color);this.dt.setSelectionFillColor(options.color)}}options.onClick=callback;BasicButton.call(this,options,ui,drawingTool);this.setBackground(options.color)}inherit(ColorButton,BasicButton);ColorButton.prototype.setBackground=function(color){if(!color){this.$element.addClass("dt-transparent");return}this.$element.css("background",color)};module.exports=ColorButton},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var inherit=__webpack_require__(0);var BasicButton=__webpack_require__(3);function FillButton(options,ui,drawingTool){BasicButton.call(this,options,ui,drawingTool);this.$element.addClass("dt-fill-color");$("<div>").addClass("dt-color").appendTo(this.$element)}inherit(FillButton,BasicButton);FillButton.prototype.setColor=function(color){if(!color){this.$element.find(".dt-color").addClass("dt-no-color");color="#ddd"}else{this.$element.find(".dt-color").removeClass("dt-no-color")}this.$element.find(".dt-color").css("background",color)};module.exports=FillButton},function(module,exports,__webpack_require__){var StampImageButton=__webpack_require__(27);var INSERT_STAMP_AFTER="text";function generateStamps(uiDefinition,stampsDefition){if(!stampsDefition){return}var prevBtnIdx=3;uiDefinition.buttons.splice(prevBtnIdx+1,0,{name:"stamp",tooltip:js_translation["tooltip_stamp"],classes:"dt-expand",label:"M",palette:"main",activatesTool:"stamp",onClick:function(){this.ui.togglePalette("stampCategories");this.ui.togglePalette("_StampsPalette")}});uiDefinition.palettes.push({name:"stampCategories",anchor:"stamp",vertical:true,hideOnClick:false});var firstStamp=true;Object.keys(stampsDefition).forEach(function(category){var categoryBtnName=category+"StampsCategory";var categoryPaletteName=category+"StampsPalette";var categoryBtn={name:categoryBtnName,label:category,tooltip:js_translation["tooltip_stampcategory"],classes:"dt-text-btn dt-expand",palette:"stampCategories",onClick:function(){this.ui.togglePalette(categoryPaletteName)}};uiDefinition.buttons.push(categoryBtn);var categoryPalette={name:categoryPaletteName,anchor:categoryBtnName};uiDefinition.palettes.push(categoryPalette);var stampButtons=generateStampButtons(categoryPaletteName,stampsDefition[category]);stampButtons.forEach(function(stampButton){uiDefinition.buttons.push(stampButton)})});function generateStampButtons(paletteName,imagesArray){var result=[];imagesArray.forEach(function(imgSrc){const bw__re=imgSrc.match(/\/([^./]+)\..{3,5}$/);result.push({imageSrc:imgSrc,setStampOnImgLoad:firstStamp,buttonClass:StampImageButton,palette:paletteName,bw__name:bw__re?bw__re[1]:undefined});if(firstStamp){firstStamp=false}});return result}function findButtonIndex(name,buttons){for(var i=0;i<buttons.length;i++){if(buttons[i].name===name){return i}}}}module.exports=generateStamps},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var inherit=__webpack_require__(0);var BasicButton=__webpack_require__(3);function LineWidthButton(options,ui,drawingTool){options.onClick=function(){this.dt.setStrokeWidth(options.width);this.dt.setSelectionStrokeWidth(options.width)};options.onStateChange=function(state){if(state.strokeWidth===options.width){this.$element.addClass("dt-active")}else{this.$element.removeClass("dt-active")}};BasicButton.call(this,options,ui,drawingTool);$("<div>").addClass("dt-line-width-icon").appendTo(this.$element);this.setLineWidth(options.width)}inherit(LineWidthButton,BasicButton);LineWidthButton.prototype.setLineWidth=function(width){if(width===0){this.$element.find(".dt-line-width-icon").addClass("dt-no-stroke");return}this.$element.find(".dt-line-width-icon").css("width",width)};module.exports=LineWidthButton},function(module,exports,__webpack_require__){var $=__webpack_require__(1);function Palette(options,ui){this.ui=ui;this.name=options.name;this.permanent=!!options.permanent;this.hideOnClick=options.hideOnClick===undefined?true:options.hideOnClick;this.anchor=options.anchor;this.$element=$("<div>").addClass("dt-palette").addClass(options.vertical?"dt-vertical":"dt-horizontal");this._closeOnClick=function(e){if(!this.hideOnClick&&(this.$element===e.target||this.$element.find(e.target).length>0)){return}if(this.$element.is(":visible")){this._hide()}this._clearWindowHandlers()}.bind(this);if(!this.permanent){this.$element.hide()}}Palette.prototype.toggle=function(){if(this.$element.is(":visible")){this._hide()}else{this._show()}};Palette.prototype._show=function(){if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"PAL_OPEN",palette:this.name})}this._position();this.$element.show();if(this.permanent){return}setTimeout(function(){$(window).on("mousedown touchstart",this._closeOnClick)}.bind(this),16)};Palette.prototype._hide=function(){if(parent.DIPF_PISA_WRAPPER){parent.DIPF_PISA_WRAPPER.sendEvent({event:"PAL_CLOSE",palette:this.name})}this.$element.hide();this._clearWindowHandlers()};Palette.prototype._clearWindowHandlers=function(){$(window).off("mousedown touchstart",this._closeOnClick)};Palette.prototype._position=function(){var anchorButton=this.anchor&&this.ui.getButton(this.anchor);if(!anchorButton){return}var p=anchorButton.$element.offset();var mainP=this.ui.getMainContainer().offset();this.$element.css({position:"absolute",top:p.top-mainP.top,left:p.left+anchorButton.$element.outerWidth()-mainP.left})};module.exports=Palette},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var inherit=__webpack_require__(0);var BasicButton=__webpack_require__(3);function StampImageButton(options,ui,drawingTool){options.onClick=function(){this.dt.tools.stamp.setStampObject(this._stamp)};BasicButton.call(this,options,ui,drawingTool);this._stamp=null;this._imageSrc=drawingTool.proxy(options.imageSrc);this.$element.addClass("dt-img-btn");this._startWaiting();this.dt.tools.stamp.loadImage(this._imageSrc,function(fabricObj,img){this._stamp=fabricObj;this.$image=$(img).appendTo(this.$element);this._stopWaiting();if(options.setStampOnImgLoad){this.dt.tools.stamp.setStampObject(this._stamp)}}.bind(this),null,"anonymous");drawingTool.on("tool:changed",function(toolName){if(toolName==="stamp"&&drawingTool.tools.stamp.getStampSrc()===this._imageSrc){this.setActive(true)}else{this.setActive(false)}}.bind(this))}inherit(StampImageButton,BasicButton);StampImageButton.prototype._startWaiting=function(){this.setLocked(true);this.$element.find("span").addClass("dt-spin").text("/")};StampImageButton.prototype._stopWaiting=function(){this.setLocked(false);this.$element.find("span").removeClass("dt-spin").text("")};module.exports=StampImageButton},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var inherit=__webpack_require__(0);var BasicButton=__webpack_require__(3);function StrokeButton(options,ui,drawingTool){BasicButton.call(this,options,ui,drawingTool);this.$element.addClass("dt-stroke-color");var $color=$("<div>").addClass("dt-color").appendTo(this.$element);$("<div>").addClass("dt-inner1").appendTo($color);$("<div>").addClass("dt-inner2").appendTo($color)}inherit(StrokeButton,BasicButton);StrokeButton.prototype.setColor=function(color){if(!color){this.$element.find(".dt-color").addClass("dt-no-color");color="#ddd"}else{this.$element.find(".dt-color").removeClass("dt-no-color")}this.$element.find(".dt-color").css("background",color)};module.exports=StrokeButton},function(module,exports,__webpack_require__){var StrokeButton=__webpack_require__(28);var FillButton=__webpack_require__(23);var ColorButton=__webpack_require__(22);var LineWidthButton=__webpack_require__(25);var COLORS=["","#efefef","#e66665","#75b792","#076bb6","#ffd605","#f47d43","#ae70af","#a9b2b1","#333333"];var STROKE_WIDTHS=[1,2,4,8,12,16,20];var FONT_SIZES=[12,17,22,27,32,37,42];var ui={palettes:[{name:"main",permanent:true,vertical:true},{name:"lines",anchor:"linesPalette"},{name:"shapes",anchor:"shapesPalette"},{name:"fontSizes",anchor:"text"},{name:"strokeColors",anchor:"strokeColorPalette"},{name:"fillColors",anchor:"fillColorPalette"},{name:"strokeWidths",anchor:"strokeWidthPalette"}],buttons:[{label:"s",tooltip:js_translation["tooltip_select"],activatesTool:"select",palette:"main"},{name:"linesPalette",tooltip:js_translation["tooltip_linetool"],classes:"dt-expand",reflectsTools:["line","arrow","doubleArrow"],palette:"main",onInit:function(){this.setLabel(this.ui.getPaletteActiveButton("lines").getLabel())},onClick:function(){this.ui.getPaletteActiveButton("lines").click();this.ui.togglePalette("lines")}},{name:"shapesPalette",tooltip:js_translation["tooltip_shapes"],classes:"dt-expand",reflectsTools:["rect","ellipse","square","circle"],palette:"main",onInit:function(){this.setLabel(this.ui.getPaletteActiveButton("shapes").getLabel())},onClick:function(){this.ui.getPaletteActiveButton("shapes").click();this.ui.togglePalette("shapes")}},{name:"text",tooltip:js_translation["tooltip_text"],label:"T",classes:"dt-expand dt-keep-text-edit-mode",activatesTool:"text",palette:"main",onClick:function(){this.ui.togglePalette("fontSizes")}},{name:"strokeColorPalette",tooltip:js_translation["tooltip_stroke"],buttonClass:StrokeButton,classes:"dt-expand dt-keep-text-edit-mode",palette:"main",onInit:function(){this.setColor(this.dt.state.stroke)},onStateChange:function(state){this.setColor(state.stroke)},onClick:function(){this.ui.togglePalette("strokeColors")}},{name:"fillColorPalette",tooltip:js_translation["tooltip_fill"],buttonClass:FillButton,classes:"dt-expand",palette:"main",onInit:function(){this.setColor(this.dt.state.fill)},onStateChange:function(state){this.setColor(state.fill)},onClick:function(){this.ui.togglePalette("fillColors")}},{name:"trash",tooltip:js_translation["tooltip_trash"],label:"d",activatesTool:"trash",palette:"main",onInit:lockWhenNothingIsSelected},{name:"line",tooltip:js_translation["tooltip_line"],label:"L",activatesTool:"line",palette:"lines"},{name:"arrow",tooltip:js_translation["tooltip_arrow"],label:"A",activatesTool:"arrow",palette:"lines"},{name:"doubleArrow",tooltip:js_translation["tooltip_doubleArrow"],label:"D",activatesTool:"doubleArrow",palette:"lines"},{name:"rect",tooltip:js_translation["tooltip_rectangle"],label:"R",activatesTool:"rect",palette:"shapes"},{name:"ellipse",tooltip:js_translation["tooltip_ellipse"],label:"E",activatesTool:"ellipse",palette:"shapes"},{name:"square",tooltip:js_translation["tooltip_square"],label:"S",activatesTool:"square",palette:"shapes"},{name:"circle",tooltip:js_translation["tooltip_circle"],label:"C",activatesTool:"circle",palette:"shapes"}]};FONT_SIZES.forEach(function(fontSize){ui.buttons.push({label:"T",classes:"dt-keep-text-edit-mode",onInit:function(){this.$element.css("font-size",fontSize);this.$element.css("line-height","50px")},onClick:function(){this.dt.setFontSize(fontSize);this.dt.setSelectionFontSize(fontSize)},onStateChange:function(state){this.setActive(state.fontSize===fontSize)},palette:"fontSizes",bw__name:fontSize})});COLORS.forEach(function(color){ui.buttons.push({buttonClass:ColorButton,classes:"dt-keep-text-edit-mode",color:color,type:"stroke",palette:"strokeColors",bw__name:color});ui.buttons.push({buttonClass:ColorButton,color:color,type:"fill",palette:"fillColors",bw__name:color})});STROKE_WIDTHS.forEach(function(width){ui.buttons.push({buttonClass:LineWidthButton,width:width,palette:"strokeWidths",bw__name:width})});function lockWhenNothingIsSelected(){this.setLocked(true);this.dt.canvas.on("object:selected",function(){this.setLocked(false)}.bind(this));this.dt.canvas.on("selection:cleared",function(){this.setLocked(true)}.bind(this))}module.exports=ui},function(module,exports,__webpack_require__){var $=__webpack_require__(1);var BasicButton=__webpack_require__(3);var Palette=__webpack_require__(26);var generateStamps=__webpack_require__(24);var uiDefinition=__webpack_require__(29);function UIManager(drawingTool){this.drawingTool=drawingTool;this.$tools=$("<div>").addClass("dt-tools").prependTo(drawingTool.$element);this._palettes={};this._buttons={};this._paletteActiveButton={};var uiDef=$.extend(true,{},uiDefinition);if(this.drawingTool.options.stamps){generateStamps(uiDef,this.drawingTool.options.stamps)}this._processUIDefinition(uiDef);for(var name in this._buttons){var btn=this._buttons[name];if(btn.onInit){btn.onInit.call(btn,this,drawingTool)}}}UIManager.prototype._processUIDefinition=function(uiDef){this.$tools.empty();uiDef.palettes.forEach(this._createPalette.bind(this));uiDef.buttons.forEach(this._createButton.bind(this))};UIManager.prototype.getButton=function(name){return this._buttons[name]};UIManager.prototype.getPalette=function(name){return this._palettes[name]};UIManager.prototype.togglePalette=function(name){this._palettes[name].toggle()};UIManager.prototype.getMainContainer=function(){return this.drawingTool.$element};UIManager.prototype.getPaletteActiveButton=function(name){return this._paletteActiveButton[name]};UIManager.prototype._createPalette=function(paletteOptions){var palette=new Palette(paletteOptions,this);var paletteName=palette.name||getUniqueName();palette.$element.appendTo(this.$tools);this._palettes[paletteName]=palette};UIManager.prototype._createButton=function(buttonOptions){var BtnClass=buttonOptions.buttonClass||BasicButton;var button=new BtnClass(buttonOptions,this,this.drawingTool);var buttonName=button.name||getUniqueName();this._buttons[buttonName]=button;this._setupPaletteActiveButton(button)};UIManager.prototype._setupPaletteActiveButton=function(button){if(!this._paletteActiveButton[button.palette]){this._paletteActiveButton[button.palette]=button}button.$element.on("mousedown touchstart",function(){this._paletteActiveButton[button.palette]=button}.bind(this))};var _idx=0;function getUniqueName(){return _idx++}module.exports=UIManager},function(module,exports){var MAX_HISTORY_LENGTH=20;function UndoRedo(drawTool){this.dt=drawTool;this._suppressHistoryUpdate=false;this.reset()}UndoRedo.prototype.undo=function(){var prevState=this._storage[this._idx-1];if(!prevState){return}this._load(prevState);this._idx-=1};UndoRedo.prototype.redo=function(){var nextState=this._storage[this._idx+1];if(!nextState){return}this._load(nextState);this._idx+=1};UndoRedo.prototype.saveState=function(opt){var newState=this.dt.save();if(this._suppressHistoryUpdate||newState===this._lastState()){return}this._idx+=1;this._storage[this._idx]=newState;this._storage.length=this._idx+1;this._cutOffOldStates()};UndoRedo.prototype.reset=function(){this._storage=[];this._idx=-1};UndoRedo.prototype.canUndo=function(){return!!this._storage[this._idx-1]};UndoRedo.prototype.canRedo=function(){return!!this._storage[this._idx+1]};UndoRedo.prototype._lastState=function(){return this._storage[this._idx]};UndoRedo.prototype._load=function(state){this.dt.load(state,null,true)};UndoRedo.prototype._cutOffOldStates=function(){var statesToRemove=this._storage.length-MAX_HISTORY_LENGTH;if(statesToRemove>0){this._storage.splice(0,statesToRemove);this._idx=this._storage.length-1}};module.exports=UndoRedo},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(33)();exports.push([module.i,"@font-face {\n  font-family: 'Draw Tool Icons';\n  src: url("+__webpack_require__(38)+') format("woff"), url('+__webpack_require__(37)+") format(\"truetype\");\n  /* Chrome 4+, Firefox 3.5, Opera 10+, Safari 3-5 */ }\n\n.dt-container {\n  white-space: nowrap;\n  -webkit-tap-highlight-color: transparent; }\n  .dt-container .dt-canvas-container {\n    vertical-align: top;\n    display: inline-block;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    outline: 0; }\n  .dt-container .dt-tools {\n    display: inline-block;\n    vertical-align: top;\n    width: 40px;\n    margin: 0;\n    position: relative; }\n  .dt-container .dt-btn {\n    z-index: 1000;\n    display: block;\n    overflow: hidden;\n    position: relative;\n    text-indent: 0;\n    white-space: nowrap;\n    font-family: \"Draw Tool Icons\", Arial, sans-serif;\n    font-size: 32px;\n    line-height: 45px;\n    height: 40px;\n    width: 40px;\n    color: #fff;\n    background: #3e8acc;\n    vertical-align: middle;\n    text-align: center;\n    padding: 0;\n    cursor: pointer;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none; }\n    .dt-container .dt-btn:hover {\n      background: #3778AF;\n      cursor: pointer; }\n    .dt-container .dt-btn.dt-active {\n      background: #245d8e; }\n    .dt-container .dt-btn.dt-locked {\n      background: #839CB1;\n      cursor: default; }\n    .dt-container .dt-btn.dt-text-btn {\n      font-size: 12px;\n      font-family: Arial, sans-serif;\n      width: auto;\n      padding: 0 5px; }\n    .dt-container .dt-btn.dt-img-btn {\n      line-height: normal; }\n      .dt-container .dt-btn.dt-img-btn span {\n        display: inline-block; }\n      .dt-container .dt-btn.dt-img-btn img {\n        display: inline-block;\n        max-width: 85%;\n        max-height: 85%;\n        vertical-align: middle; }\n    .dt-container .dt-btn.dt-stroke-color:before, .dt-container .dt-btn.dt-fill-color:before {\n      content: '';\n      background: #fff;\n      position: absolute;\n      top: 8px;\n      left: 8px;\n      width: 24px;\n      height: 24px; }\n    .dt-container .dt-btn.dt-stroke-color .dt-inner1 {\n      /* inset/overlay white box with black border */\n      background: #fff;\n      position: absolute;\n      height: 12px;\n      width: 12px;\n      left: 5px;\n      top: 5px; }\n    .dt-container .dt-btn.dt-stroke-color .dt-inner2 {\n      /* inset/overlay blue box with no border */\n      background: #3e8acc;\n      border: none;\n      position: absolute;\n      height: 10px;\n      width: 10px;\n      left: 6px;\n      top: 6px; }\n    .dt-container .dt-btn .dt-color {\n      background: #fff;\n      overflow: hidden;\n      position: absolute;\n      top: 9px;\n      left: 9px;\n      width: 22px;\n      height: 22px; }\n      .dt-container .dt-btn .dt-color.dt-no-color:after {\n        content: 'L';\n        color: #e66665;\n        position: absolute;\n        left: -12px;\n        bottom: -14px;\n        font-size: 50px; }\n    .dt-container .dt-btn.dt-transparent {\n      background: #f4f4f4; }\n      .dt-container .dt-btn.dt-transparent:after {\n        content: 'L';\n        color: #e66665;\n        position: absolute;\n        left: -32px;\n        bottom: -16px;\n        font-size: 100px; }\n    .dt-container .dt-btn .dt-line-width-icon {\n      height: 26px;\n      background: #fff;\n      margin: 6px auto; }\n      .dt-container .dt-btn .dt-line-width-icon.dt-no-stroke {\n        width: 1px; }\n        .dt-container .dt-btn .dt-line-width-icon.dt-no-stroke:after {\n          content: 'L';\n          color: #e66665;\n          position: absolute;\n          left: 5px;\n          top: 2px; }\n    .dt-container .dt-btn.dt-send-to, .dt-container .dt-btn.dt-undo-redo {\n      line-height: 41px; }\n  .dt-container .dt-expand {\n    position: relative; }\n    .dt-container .dt-expand:after {\n      content: 't';\n      font-family: \"Draw Tool Icons\", Arial, sans-serif;\n      font-size: 32px;\n      position: absolute;\n      bottom: -21px;\n      right: -11px; }\n  .dt-container .dt-palette.dt-horizontal .dt-btn {\n    display: inline-block;\n   vertical-align: middle; }\n  .dt-container .dt-palette.dt-vertical .dt-btn {\n    display: block; }\n  .dt-container .dt-spin {\n    -webkit-animation: dt-spin 2s infinite linear;\n    animation: dt-spin 2s infinite linear; }\n\n@-webkit-keyframes dt-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg); } }\n\n@keyframes dt-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(359deg);\n    transform: rotate(359deg); } }\n",""])},function(module,exports){module.exports=function(){var list=[];list.toString=function toString(){var result=[];for(var i=0;i<this.length;i++){var item=this[i];if(item[2]){result.push("@media "+item[2]+"{"+item[1]+"}")}else{result.push(item[1])}}return result.join("")};list.i=function(modules,mediaQuery){if(typeof modules==="string")modules=[[null,modules,""]];var alreadyImportedModules={};for(var i=0;i<this.length;i++){var id=this[i][0];if(typeof id==="number")alreadyImportedModules[id]=true}for(i=0;i<modules.length;i++){var item=modules[i];if(typeof item[0]!=="number"||!alreadyImportedModules[item[0]]){if(mediaQuery&&!item[2]){item[2]=mediaQuery}else if(mediaQuery){item[2]="("+item[2]+") and ("+mediaQuery+")"}list.push(item)}}};return list}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(undefined){var isArray=Array.isArray?Array.isArray:function _isArray(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var defaultMaxListeners=10;function init(){this._events={};if(this._conf){configure.call(this,this._conf)}}function configure(conf){if(conf){this._conf=conf;conf.delimiter&&(this.delimiter=conf.delimiter);conf.maxListeners&&(this._events.maxListeners=conf.maxListeners);conf.wildcard&&(this.wildcard=conf.wildcard);conf.newListener&&(this.newListener=conf.newListener);if(this.wildcard){this.listenerTree={}}}}function EventEmitter(conf){this._events={};this.newListener=false;configure.call(this,conf)}function searchListenerTree(handlers,type,tree,i){if(!tree){return[]}var listeners=[],leaf,len,branch,xTree,xxTree,isolatedBranch,endReached,typeLength=type.length,currentType=type[i],nextType=type[i+1];if(i===typeLength&&tree._listeners){if(typeof tree._listeners==="function"){handlers&&handlers.push(tree._listeners);return[tree]}else{for(leaf=0,len=tree._listeners.length;leaf<len;leaf++){handlers&&handlers.push(tree._listeners[leaf])}return[tree]}}if(currentType==="*"||currentType==="**"||tree[currentType]){if(currentType==="*"){for(branch in tree){if(branch!=="_listeners"&&tree.hasOwnProperty(branch)){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+1))}}return listeners}else if(currentType==="**"){endReached=i+1===typeLength||i+2===typeLength&&nextType==="*";if(endReached&&tree._listeners){listeners=listeners.concat(searchListenerTree(handlers,type,tree,typeLength))}for(branch in tree){if(branch!=="_listeners"&&tree.hasOwnProperty(branch)){if(branch==="*"||branch==="**"){if(tree[branch]._listeners&&!endReached){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],typeLength))}listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))}else if(branch===nextType){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+2))}else{listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))}}}return listeners}listeners=listeners.concat(searchListenerTree(handlers,type,tree[currentType],i+1))}xTree=tree["*"];if(xTree){searchListenerTree(handlers,type,xTree,i+1)}xxTree=tree["**"];if(xxTree){if(i<typeLength){if(xxTree._listeners){searchListenerTree(handlers,type,xxTree,typeLength)}for(branch in xxTree){if(branch!=="_listeners"&&xxTree.hasOwnProperty(branch)){if(branch===nextType){searchListenerTree(handlers,type,xxTree[branch],i+2)}else if(branch===currentType){searchListenerTree(handlers,type,xxTree[branch],i+1)}else{isolatedBranch={};isolatedBranch[branch]=xxTree[branch];searchListenerTree(handlers,type,{"**":isolatedBranch},i+1)}}}}else if(xxTree._listeners){searchListenerTree(handlers,type,xxTree,typeLength)}else if(xxTree["*"]&&xxTree["*"]._listeners){searchListenerTree(handlers,type,xxTree["*"],typeLength)}}return listeners}function growListenerTree(type,listener){type=typeof type==="string"?type.split(this.delimiter):type.slice();for(var i=0,len=type.length;i+1<len;i++){if(type[i]==="**"&&type[i+1]==="**"){return}}var tree=this.listenerTree;var name=type.shift();while(name){if(!tree[name]){tree[name]={}}tree=tree[name];if(type.length===0){if(!tree._listeners){tree._listeners=listener}else if(typeof tree._listeners==="function"){tree._listeners=[tree._listeners,listener]}else if(isArray(tree._listeners)){tree._listeners.push(listener);if(!tree._listeners.warned){var m=defaultMaxListeners;if(typeof this._events.maxListeners!=="undefined"){m=this._events.maxListeners}if(m>0&&tree._listeners.length>m){tree._listeners.warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",tree._listeners.length);console.trace()}}}return true}name=type.shift()}return true}EventEmitter.prototype.delimiter=".";EventEmitter.prototype.setMaxListeners=function(n){this._events||init.call(this);this._events.maxListeners=n;if(!this._conf)this._conf={};this._conf.maxListeners=n};EventEmitter.prototype.event="";EventEmitter.prototype.once=function(event,fn){this.many(event,1,fn);return this};EventEmitter.prototype.many=function(event,ttl,fn){var self=this;if(typeof fn!=="function"){throw new Error("many only accepts instances of Function")}function listener(){if(--ttl===0){self.off(event,listener)}fn.apply(this,arguments)}listener._origin=fn;this.on(event,listener);return self};EventEmitter.prototype.emit=function(){this._events||init.call(this);var type=arguments[0];if(type==="newListener"&&!this.newListener){if(!this._events.newListener){return false}}if(this._all){var l=arguments.length;var args=new Array(l-1);for(var i=1;i<l;i++)args[i-1]=arguments[i];for(i=0,l=this._all.length;i<l;i++){this.event=type;this._all[i].apply(this,args)}}if(type==="error"){if(!this._all&&!this._events.error&&!(this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}var handler;if(this.wildcard){handler=[];var ns=typeof type==="string"?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handler,ns,this.listenerTree,0)}else{handler=this._events[type]}if(typeof handler==="function"){this.event=type;if(arguments.length===1){handler.call(this)}else if(arguments.length>1)switch(arguments.length){case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var l=arguments.length;var args=new Array(l-1);for(var i=1;i<l;i++)args[i-1]=arguments[i];handler.apply(this,args)}return true}else if(handler){var l=arguments.length;var args=new Array(l-1);for(var i=1;i<l;i++)args[i-1]=arguments[i];var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){this.event=type;listeners[i].apply(this,args)}return listeners.length>0||!!this._all}else{return!!this._all}};EventEmitter.prototype.on=function(type,listener){if(typeof type==="function"){this.onAny(type);return this}if(typeof listener!=="function"){throw new Error("on only accepts instances of Function")}this._events||init.call(this);this.emit("newListener",type,listener);if(this.wildcard){growListenerTree.call(this,type,listener);return this}if(!this._events[type]){this._events[type]=listener}else if(typeof this._events[type]==="function"){this._events[type]=[this._events[type],listener]}else if(isArray(this._events[type])){this._events[type].push(listener);if(!this._events[type].warned){var m=defaultMaxListeners;if(typeof this._events.maxListeners!=="undefined"){m=this._events.maxListeners}if(m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);console.trace()}}}return this};EventEmitter.prototype.onAny=function(fn){if(typeof fn!=="function"){throw new Error("onAny only accepts instances of Function")}if(!this._all){this._all=[]}this._all.push(fn);return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.off=function(type,listener){if(typeof listener!=="function"){throw new Error("removeListener only takes instances of Function")}var handlers,leafs=[];if(this.wildcard){var ns=typeof type==="string"?type.split(this.delimiter):type.slice();leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0)}else{if(!this._events[type])return this;handlers=this._events[type];leafs.push({_listeners:handlers})}for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];handlers=leaf._listeners;if(isArray(handlers)){var position=-1;for(var i=0,length=handlers.length;i<length;i++){if(handlers[i]===listener||handlers[i].listener&&handlers[i].listener===listener||handlers[i]._origin&&handlers[i]._origin===listener){position=i;break}}if(position<0){continue}if(this.wildcard){leaf._listeners.splice(position,1)}else{this._events[type].splice(position,1)}if(handlers.length===0){if(this.wildcard){delete leaf._listeners}else{delete this._events[type]}}return this}else if(handlers===listener||handlers.listener&&handlers.listener===listener||handlers._origin&&handlers._origin===listener){if(this.wildcard){delete leaf._listeners}else{delete this._events[type]}}}return this};EventEmitter.prototype.offAny=function(fn){var i=0,l=0,fns;if(fn&&this._all&&this._all.length>0){fns=this._all;for(i=0,l=fns.length;i<l;i++){if(fn===fns[i]){fns.splice(i,1);return this}}}else{this._all=[]}return this};EventEmitter.prototype.removeListener=EventEmitter.prototype.off;EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){!this._events||init.call(this);return this}if(this.wildcard){var ns=typeof type==="string"?type.split(this.delimiter):type.slice();var leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0);for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];leaf._listeners=null}}else{if(!this._events[type])return this;this._events[type]=null}return this};EventEmitter.prototype.listeners=function(type){if(this.wildcard){var handlers=[];var ns=typeof type==="string"?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handlers,ns,this.listenerTree,0);return handlers}this._events||init.call(this);if(!this._events[type])this._events[type]=[];if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]};EventEmitter.prototype.listenersAny=function(){if(this._all){return this._all}else{return[]}};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return EventEmitter}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof exports==="object"){exports.EventEmitter2=EventEmitter}else{window.EventEmitter2=EventEmitter}}()},function(module,exports){var stylesInDom={},memoize=function(fn){var memo;return function(){if(typeof memo==="undefined")memo=fn.apply(this,arguments);return memo}},isOldIE=memoize(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),getHeadElement=memoize(function(){return document.head||document.getElementsByTagName("head")[0]}),singletonElement=null,singletonCounter=0,styleElementsInsertedAtTop=[];module.exports=function(list,options){if(typeof DEBUG!=="undefined"&&DEBUG){if(typeof document!=="object")throw new Error("The style-loader cannot be used in a non-browser environment")}options=options||{};if(typeof options.singleton==="undefined")options.singleton=isOldIE();if(typeof options.insertAt==="undefined")options.insertAt="bottom";var styles=listToStyles(list);addStylesToDom(styles,options);return function update(newList){var mayRemove=[];for(var i=0;i<styles.length;i++){var item=styles[i];var domStyle=stylesInDom[item.id];domStyle.refs--;mayRemove.push(domStyle)}if(newList){var newStyles=listToStyles(newList);addStylesToDom(newStyles,options)}for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(domStyle.refs===0){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};function addStylesToDom(styles,options){for(var i=0;i<styles.length;i++){var item=styles[i];var domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++){domStyle.parts[j](item.parts[j])}for(;j<item.parts.length;j++){domStyle.parts.push(addStyle(item.parts[j],options))}}else{var parts=[];for(var j=0;j<item.parts.length;j++){parts.push(addStyle(item.parts[j],options))}stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function listToStyles(list){var styles=[];var newStyles={};for(var i=0;i<list.length;i++){var item=list[i];var id=item[0];var css=item[1];var media=item[2];var sourceMap=item[3];var part={css:css,media:media,sourceMap:sourceMap};if(!newStyles[id])styles.push(newStyles[id]={id:id,parts:[part]});else newStyles[id].parts.push(part)}return styles}function insertStyleElement(options,styleElement){var head=getHeadElement();var lastStyleElementInsertedAtTop=styleElementsInsertedAtTop[styleElementsInsertedAtTop.length-1];if(options.insertAt==="top"){if(!lastStyleElementInsertedAtTop){head.insertBefore(styleElement,head.firstChild)}else if(lastStyleElementInsertedAtTop.nextSibling){head.insertBefore(styleElement,lastStyleElementInsertedAtTop.nextSibling)}else{head.appendChild(styleElement)}styleElementsInsertedAtTop.push(styleElement)}else if(options.insertAt==="bottom"){head.appendChild(styleElement)}else{throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")}}function removeStyleElement(styleElement){styleElement.parentNode.removeChild(styleElement);var idx=styleElementsInsertedAtTop.indexOf(styleElement);if(idx>=0){styleElementsInsertedAtTop.splice(idx,1)}}function createStyleElement(options){var styleElement=document.createElement("style");styleElement.type="text/css";insertStyleElement(options,styleElement);return styleElement}function createLinkElement(options){var linkElement=document.createElement("link");linkElement.rel="stylesheet";insertStyleElement(options,linkElement);return linkElement}function addStyle(obj,options){var styleElement,update,remove;if(options.singleton){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement(options));update=applyToSingletonTag.bind(null,styleElement,styleIndex,false);remove=applyToSingletonTag.bind(null,styleElement,styleIndex,true)}else if(obj.sourceMap&&typeof URL==="function"&&typeof URL.createObjectURL==="function"&&typeof URL.revokeObjectURL==="function"&&typeof Blob==="function"&&typeof btoa==="function"){styleElement=createLinkElement(options);update=updateLink.bind(null,styleElement);remove=function(){removeStyleElement(styleElement);if(styleElement.href)URL.revokeObjectURL(styleElement.href)}}else{styleElement=createStyleElement(options);update=applyToTag.bind(null,styleElement);remove=function(){removeStyleElement(styleElement)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else{remove()}}}var replaceText=function(){var textStore=[];return function(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet){styleElement.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=styleElement.childNodes;if(childNodes[index])styleElement.removeChild(childNodes[index]);if(childNodes.length){styleElement.insertBefore(cssNode,childNodes[index])}else{styleElement.appendChild(cssNode)}}}function applyToTag(styleElement,obj){var css=obj.css;var media=obj.media;if(media){styleElement.setAttribute("media",media)}if(styleElement.styleSheet){styleElement.styleSheet.cssText=css}else{while(styleElement.firstChild){styleElement.removeChild(styleElement.firstChild)}styleElement.appendChild(document.createTextNode(css))}}function updateLink(linkElement,obj){var css=obj.css;var sourceMap=obj.sourceMap;if(sourceMap){css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"}var blob=new Blob([css],{type:"text/css"});var oldSrc=linkElement.href;linkElement.href=URL.createObjectURL(blob);if(oldSrc)URL.revokeObjectURL(oldSrc)}},function(module,exports,__webpack_require__){var content=__webpack_require__(32);if(typeof content==="string")content=[[module.i,content,""]];var update=__webpack_require__(35)(content,{});if(content.locals)module.exports=content.locals;if(false){if(!content.locals){module.hot.accept("!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/lib/loader.js!./drawing-tool.scss",function(){var newContent=require("!!./../../node_modules/css-loader/index.js!./../../node_modules/sass-loader/lib/loader.js!./drawing-tool.scss");if(typeof newContent==="string")newContent=[[module.id,newContent,""]];update(newContent)})}module.hot.dispose(function(){update()})}},function(module,exports){module.exports="data:application/x-font-ttf;base64,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"},function(module,exports){module.exports="data:application/font-woff;base64,d09GRgABAAAAABTwABEAAAAAHgwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABgAAAABwAAAAcbEslcUdERUYAAAGcAAAAIgAAACgAUwAkT1MvMgAAAcAAAABKAAAAYGs1nRFjbWFwAAACDAAAAKIAAAGiZLWV0mN2dCAAAAKwAAAAHgAAAB4L2QKaZnBnbQAAAtAAAAGxAAACZVO0L6dnYXNwAAAEhAAAAAgAAAAI//8AA2dseWYAAASMAAANVAAAEzxhoZXAaGVhZAAAEeAAAAAtAAAANgc+ROtoaGVhAAASEAAAAB0AAAAkD9UH/WhtdHgAABIwAAAAYwAAAJDMzxg/bG9jYQAAEpQAAAA2AAAASnA4a85tYXhwAAASzAAAACAAAAAgAUIB8G5hbWUAABLsAAAA8AAAAdYj8kCmcG9zdAAAE9wAAACCAAAA6TPCOqVwcmVwAAAUYAAAAIcAAAC3nR7OQHdlYmYAABToAAAABgAAAAbLelP0AAAAAQAAAADMPaLPAAAAAM/zBqgAAAAA0Bp7+XjaY2BkYGDgA2IJBgUgycTACITKQMwC5jEwMEIwAAwlAHgAAHjaY2Bh/cD4hYGVgYXVmHUGAwOjPIRmvsqQwiTAwMDEwMbJAAOMDEggIM01heEAA6/qHw4wn/0PgwZMDbsWuxeQUmBgBAAuHgpGAAB42mNgYGBmgGAZBkYGEJgD5DGC+SwMDWBaACjCw8DL4MjgxuDLEMKQwpDLUMpQrsCloK8Qr/rn/3+gKpCsM4MPQxBDMkMOQxFQlgEm+//r/0P/D/7f83/H/1X/F/+f/3/eA7H7n+4fvqUOtREnYGRjgCthZAISTOgKGAgDZgYWVjZ2MJODE0RycfOgquDlgzL4BUCkoJCwCIMowyABALyEJWYAAAAAAAAEKQB7AFIAcwB7AD0AZgBzAHcAuAD1AEQFEQAAeNpdUbtOW0EQ3Q0PA4HE2CA52hSzmZDGe6EFCcTVjWJkO4XlCGk3cpGLcQEfQIFEDdqvGaChpEibBiEXSHxCPiESM2uIojQ7O7NzzpkzS8qRqnfpa89T5ySQwt0GzTb9Tki1swD3pOvrjYy0gwdabGb0ynX7/gsGm9GUO2oA5T1vKQ8ZTTuBWrSn/tH8Cob7/B/zOxi0NNP01DoJ6SEE5ptxS4PvGc26yw/6gtXhYjAwpJim4i4/plL+tzTnasuwtZHRvIMzEfnJNEBTa20Emv7UIdXzcRRLkMumsTaYmLL+JBPBhcl0VVO1zPjawV2ys+hggyrNgQfYw1Z5DB4ODyYU0rckyiwNEfZiq8QIEZMcCjnl3Mn+pED5SBLGvElKO+OGtQbGkdfAoDZPs/88m01tbx3C+FkcwXe/GUs6+MiG2hgRYjtiKYAJREJGVfmGGs+9LAbkUvvPQJSA5fGPf50ItO7YRDyXtXUOMVYIen7b3PLLirtWuc6LQndvqmqo0inN+17OvscDnh4Lw0FjwZvP+/5Kgfo8LK40aA4EQ3o3ev+iteqIq7wXPrIn07+xWgAAAAAAAAH//wACeNqdWH2MG8d1nzc7+0HekjfL44eoE8VbrpYUQ91R5IpHU2dSJ1mWpatyDq6RoMqHk3ytVTuKrcRyoNiCehCugGJcbMuxYKuuIegP1TUcw9ilroaRpjFQpwiaVm2vgSSoStq4BhpcUReOkab1+W7bN0vqy7H/KZecffubr533fu/NPBJKthNCf0/eQySikiEPSPnutsoiH1Q9Rf7p3W2Jokg8ScCygNuqEl2+uw0CdwzTsE3D3E4H/HVw1n9Y3rP03e3sEsEhoQ3nlZPqVSITjYyQtkpIqU1EIdM7Cgrd4qImq1q3BDdU9sJQIhsrIZoKUVuCNvVh2z7/ByuU/gxersD70r/Dhe3+5HJKnp33t4s5yWU4p5bUX+FKekkT58TxvR5psS3h8F6vtAguL7twxQspi26IexEoebKy6Bl4j4SM2EVJUem6VANnjXEyQG77XYbr9Dxc9+2Vg/55eJ624Hn/yMpfSk/eRG22a+Vd/wjWNeE7BHD955Sv4Pp7yChpK8Hq6R0F3FkoQgUqUbRuCa5eFm+ILwN9KagXbKmgQgralWfp1ldPwR9V5l5beecUnIPvH6K//Ok06uDQ9ZXotNDDLP0r9YRyiURIRuihR+ghhnpgQg+rhR7Wll1yxYuiHqLcS+L6VdRDFu/JKOqBST3hjh76NtnDAymWisvKQGFdPZ5KmgP14dqmQt4cUJVZ6Fuh/7QCMfA/8FcKK/4Hxy+/D2Mw/v7CwnX/df/N65fZj39+dm7u7L++9xKW773wzZmZb7z48hPHjx8jhMER2lCeUfcThlrqI1myi7RTqCmXOm0m3lmVF9spoZcsS2ndEtyBwIZyaNEzUT1eVjVi7bAebTQabsrwevsaDVSZEaKFLDj1glpPpqAM+cIWGHaqWUiq8V7Amf8Bfn+lslS/a/JLl8bPlKPwXjEcVkrPZcuD5qUsrD1NG/AIXfBfWin//K76+N+MzzlhuIpt6MJzpvljq1Q2n0POAZyAF5U5dQl5bpPP5Ta4StlTb/IZe0m74eC0f275LfgXNg6XxvzKJ38WjOfQmnJJ/Toy+CBpR3GUeZBIDyu54WrnkUokjI+halsWw8vB8MhrdmVe1UUV+m+4dHFU7QmV2kwVIiOhUsBylaGuqBZCXQleGbZkoQ9bhmxYCbOGc7fYGLw1RlutpWt0Ch6KUw2+4z+28j9x/yXbDnxshh5Sn1YdtFgv2djlln6DW7f5mI7c0js+pnV8TNCpZtQc00kYCcusY+SYaSqnm82Pv9ZS4h//Bz3UYhPN5idvto5LV4MYMoI+dE0d+f/NBZ+aC0ZastVsLv2syV77ZB+ca3afjrPXhN4/pBNKXN1NvkqeJu2dOJO71fF2s8V2j5hsg7zoPlhtA8pu3AnuFw/vBK3k9jsdAdxHhU/NP6KRNJrnEe7tgZJ7oDpf6SFxNEplj7BEZRSNsqcixD270CiP4Ss/QoyYSxvuHqOtyV8SNK7E3Hs7BnJSSac6PKJW6y2oj1AjripqviwNQSFvFUosh49GPJmIKxlA3xRXBqzcOiunWE0YrgdX36Z8U96U35Sv5S3RIbisPHy4dVB7TRvLfOWB/b9McJ2FqEZtXWfRUiqp6TI+MU2P8FqrVuQaMBaJ7nPKbE3a/2uu/5uu2+lGk3FgMlNOZir1MI9oXE+nFR1G04xpNEL9xTGuhMsjxdYayiTG2P60//39S+towRjXKlo62hdPrOJ8kKV1zeDMhLWpV5v+VCSeZmGmSboeVcOOuXmQE/SuBYztZXWZmKRCNmFUGyV/QtphjBZeCaPEakGNGgpZIeSQIy1htiYiVSFUUDCEcJdgzdYg+uXCi26Oew6aYAOKG7iX6Sm5VtWrhRbdGveKWNGLYi/3tvSUvAa2aXBvWARJjD3b8O7k0HLVhles4b3VIF61YsS84mij4ZUMhDZhJOozNqERhC0cs5pMGN1bXLHMXL5mYFE3a0ET9EQ0b0DWPlM8dOSFOM/A1/tLhRJ80640N8OTdqViL5+1Kz43G8fgJzzWD1n/Qia9zj81DtFFqexfqBQDWfoynbbKdgae6O/jFdu/bFfsT14X/UFptBYLhVI/rIUT/qy5Jn0UYkvXWMI/ZVdQRP9T4Ed0Smmg/xVQ4zvIOEakx8k10h6gHY9o3yOEycccJ5A6RUNo+bcfQqxxIzx5xn2OM2/LZITh9uNUq4FPze8OAHCPll3rirdeW2xb64VjWBit3PXcq6GGW9qi2+Le/SjuQ3Ef9x5E8TCKh7lXRXENdltTFd3WpNCfnkCoth6NoGxAP2oZ7n0N9/6YO97wHtyHBtnVcA8b7s6GW415ZQODoHfPBmxcKgd7hjDDCNQ7pkolcfuoCn+KKyW4aS8rl++LZ6lZxe2kbphoXewSGFTFZrlCvs8s5FFQf7Om3kFSgfUDBH6kMX2pEc1a/aD0W9loY0lnGtfGxxorBxtj4xr/25Cu0fOM6Rqs5A8bWg1rmV7TZW0cHrZ15jN9P9erOqK8ypm2wLWaHmKaUcOBlExN19i3rFg8HrO+hc5c04wVumP6d7dKlC9/xI1VjK3iBvVXnoSfaJxr/iD2RdddOqDry/N3YBHxhFP7gxyHxx3bRn+8quwnz5A/JT8kS4T01Vt0C6AKt2DczhfyBRGkyoBofThAnTpiFLfiAOw2LUI1S9dSEbmyIAJTQlFzvdRK3cSitBcEBiW4Hey2xAFQkd2rnkqSVDXpJAfqYuoS4HxWrgyWdKtiWLREqAzduiBM4kuKV0Jrd6JoIh4ESbW2sQkbBSPEkQcvKxMszWYUP5oR1xMTE5XNhzRqUEVhXVSPB2i6voYmbqHYFp6G0alVxtLIzA7KmaIypkioVT3ED0wf6R8p0KgiQCphe1S2EcBN+05Yj8T9KX+CG/yfryajqqKMMwrfUzDe6tIoYxMH3P9aSjBdoeFNjTN/fHsdjaTl8Kvf7lbzocYZZsczjQjLFHm0mGJFZuytzZka3/ZD29D4RDWjJXdZWRY/elyXwkEnjYWilGXsbRrVqZKKcxZBUAtpGN0zdtSK4YqTRjxAkXAy09i3zd8q4pFDWW3EYxLSVMamzaiVokpv0FRXcVVMk7dGzQRVojioEcwkc2yosblTkQBk1P+QiU+lNi1TRu0ByApMDEdDUaZMjqPApAEbHJ4o6qyvX9fNGM3Y9r2M56fON+L7h97dojNzoqal99Y2ZzK/U+tX9u7VJ/YKPmfgZfUf5afJHHmVvCPiX98t5gZ8/hRxPwuzzc8i86eI+5ls7oLmQEGweYgGZOu7SdraDTbnhvAsa6lGt8apOuvQq0TAGYJcCSKQxyBWRcKO0Js8xrF7AQ++ViGfEy3xh1I5EHDcLv3x9fFVAqbXAm8S75MvZLrsVZKJiS8ONg728tt4zn8Tw3ZwEur70/yj2uw2hsxVZFlQhDNDnzpwuL9hC+ojGLQXLL8Bd9p2YTx4+If8Q7pu8GuVb4ywgOiYVSrIO11az8an3vjo14J9jGf12pkXulXaWw+cgjPsyOyvkRY8ZcWnVt6U7wNOWWxnpqLv+/Kj62Orok44HIoPmEyLRtMWTbMYNVDCSKjTNK8M8kQ2SrUo09MRnh7kWpGW86Nf2JBM4ckEI2eX8rhm06xHxYp5QGLkO5MxPUJ1pPgNbxGaQRJnx+yA2zwREw3RX1pRKyncQvQWA3IWQre4wwVCXPTV2Kns2DpJwFCg/n8HTjA4PI1kp+GEYjJIUv9XjAGwbbvmKGUVoLIiKWF98/1/MDJyz/biDl0PxTc30EIdKzGqsmJlbA1LmHqmssZcP8Yjm3dJ7Isjzio80LF0kQB5Hf3hoDKDWc0wadviPJxwgn07KFy7jF9w82WXXpkfCPIOr4Cb7wDFbdYOUkdBxWEb+VRGqoNwCNYLnUiK51BmxDHfhP/cPvUGXFuwi6fnfnHOPXXC//M/nC3mJGW1tcM/q696+21YPv3ks1/7u3FzwDoxc+zYM1t2DBbf+eqRmcfX60rI2PO/ZMjBnBfoDLwon8SzyloyRG5l2a7qdB7EXwBB4abK+AU3W/YGOnlCGmrJ1Ebk+sZCHH0y8EerlsedSlHpzBuX4eTeQ39R6a+VtIQZGx6g2kPJzY0x+hy8S/e+sPCx39A0g83smH0YsxslqWsp4M1XmmMEpEkMqRfko/gCXyBBzjBPJBIRZx4pyBWoLp48hnqjIgkAobcQSNIk7KTYbKf/lsgJyQW0xQOBLe4l7T6xnFvFzSTwotkna90yMEzyynz0lmGiSTzo9BhB4oehDbagPRJxTO0xRohohIbhdt7KCzSLAWJd4YJ77hdzp4v2Zbj23cntQ2/Px3X/7H251YqUK87O+t87gYve8syxYzMnrGxu998fefap56ennSEgewwIy5H1j88cefQHRZHnH4VXlBcwRxb/y6Qwz3+gayGNr3Ic57b/RIKEORxbLdBO3jwQHNUVddFVuKeJdXT+s+DiGN6z6Ca5twrFtXrn34DAnCP4s8zPucPRtdksGM1WC7KTk5Ow/fhTT8ErUlkqLy8sL3zenQR2uO1TIf8HPGPvfnjaY2BkYGAA4huKm+bE89t8ZZDnYACBC1LVP5Fp9uvsf4AUBwMTiAcANjgKtwAAAHjaY2BkYGD/8/8GAwMHAwiwX2dgZEAFKgBniwPnAAAAeNpjesPgwgAEHGDMuAlIX4XSzUA6H4hrgdgYyK8H0tZA/AHIvgikjwNpVSCWBeJVHAxMQHnmGCB7CVCumPkfAwP7HwYGGM20koGB8T8Qh0AwA4g9A0gXQmiQHAuQCwDwQxXfAHjaY2Bg0AHDNIY1DK8Y7RgXMJ5gkmDyY2phDmHhY5Vha+Hg4UjhWMdxidOIcxoeOA8ANqAR0gAAAAEAAAAkARMABgAAAAAAAgABAAIAFgAAAQAA2QAAAAB42n2QwU7CQBRFz9BKwtaFYWVmCYvWUlkYdgbjmgWha4xgSYyYimHH9+nGz/A7vNO+lIQQM5mZM/Pu7X1ToEdFhIt7QKnZsCPWqeEOl7waR8w4GMf0+TG+wPNr3KXvusZfXLlr428yN2aqvBVLdlqf5dqzEZeiR7a8icNe8aK6Jycl0z6QYqfxzoQbjbVp16025UOnVLcr3Q+VM+VBtaUSEubSbfWK/zImmsHlW59vfU01ly7hTjPQiPGJ/piz0JcrdbSp87zUQZ/We2Y5yRlfId9T+zpvnsL+1T2f6rnpI9RydZVzW68ju1dXf+ChPcB42n3Guw4BQQCF4XMWu+6XdxCXyuwwu6sUMkoal3gBJCIahbe3Mqf2N9+PCP8bAoxYKR1hjAmmmMHAIUMOjy122OOAI04448Iqa4yZsM4Gm2yxzQ677LHPQXx9fF63NHk/78aYzU9bjkyllXO5kE5mMpeFXMpV0PqgCzq//gI2zie5AAB42tvB+L91A2Mvg/cGjoCIjYyMfZEb3di0IxQ3CER6bxAJAjIaImU3sGnHRDBsYFZw3cCs7bKBVcF1E3MfkzaYwwLksEpCOIwb2KBKuBRcdzGwMTIxMGlvZHYrA4pwAtVx9cG5HEAupzWcyw7kckjCudxALps4nMsD5HILwriRG0S0AXp0M6YAAAFT9Mt5AAA="},function(module,exports,__webpack_require__){var DrawingTool=__webpack_require__(10);module.exports=DrawingTool}])});
